var tl=Object.defineProperty;var el=(e,t,i)=>t in e?tl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var ut=(e,t,i)=>(el(e,typeof t!="symbol"?t+"":t,i),i);const il=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}};il();function gr(e,t){const i=Object.create(null),s=e.split(",");for(let r=0;r<s.length;r++)i[s[r]]=!0;return t?r=>!!i[r.toLowerCase()]:r=>!!i[r]}const sl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",rl=gr(sl);function va(e){return!!e||e===""}function dr(e){if(O(e)){const t={};for(let i=0;i<e.length;i++){const s=e[i],r=ot(s)?ol(s):dr(s);if(r)for(const n in r)t[n]=r[n]}return t}else{if(ot(e))return e;if(gt(e))return e}}const nl=/;(?![^(]*\))/g,al=/:(.+)/;function ol(e){const t={};return e.split(nl).forEach(i=>{if(i){const s=i.split(al);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function fr(e){let t="";if(ot(e))t=e;else if(O(e))for(let i=0;i<e.length;i++){const s=fr(e[i]);s&&(t+=s+" ")}else if(gt(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const G={},Ue=[],Tt=()=>{},ll=()=>!1,ul=/^on[^a-z]/,Gi=e=>ul.test(e),_r=e=>e.startsWith("onUpdate:"),at=Object.assign,pr=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},cl=Object.prototype.hasOwnProperty,Y=(e,t)=>cl.call(e,t),O=Array.isArray,ni=e=>Ki(e)==="[object Map]",hl=e=>Ki(e)==="[object Set]",U=e=>typeof e=="function",ot=e=>typeof e=="string",mr=e=>typeof e=="symbol",gt=e=>e!==null&&typeof e=="object",Pa=e=>gt(e)&&U(e.then)&&U(e.catch),gl=Object.prototype.toString,Ki=e=>gl.call(e),dl=e=>Ki(e).slice(8,-1),fl=e=>Ki(e)==="[object Object]",yr=e=>ot(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ri=gr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ji=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},_l=/-(\w)/g,Xe=Ji(e=>e.replace(_l,(t,i)=>i?i.toUpperCase():"")),pl=/\B([A-Z])/g,We=Ji(e=>e.replace(pl,"-$1").toLowerCase()),Va=Ji(e=>e.charAt(0).toUpperCase()+e.slice(1)),ds=Ji(e=>e?`on${Va(e)}`:""),ui=(e,t)=>!Object.is(e,t),fs=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},ki=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},ml=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Zr;const yl=()=>Zr||(Zr=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let fe;const Si=[];class xl{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&fe&&(this.parent=fe,this.index=(fe.scopes||(fe.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(Si.push(this),fe=this)}off(){this.active&&(Si.pop(),fe=Si[Si.length-1])}stop(t){if(this.active){if(this.effects.forEach(i=>i.stop()),this.cleanups.forEach(i=>i()),this.scopes&&this.scopes.forEach(i=>i.stop(!0)),this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function Sl(e,t){t=t||fe,t&&t.active&&t.effects.push(e)}const xr=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wa=e=>(e.w&ae)>0,Ta=e=>(e.n&ae)>0,Cl=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ae},bl=e=>{const{deps:t}=e;if(t.length){let i=0;for(let s=0;s<t.length;s++){const r=t[s];wa(r)&&!Ta(r)?r.delete(e):t[i++]=r,r.w&=~ae,r.n&=~ae}t.length=i}},Fs=new WeakMap;let ei=0,ae=1;const Rs=30,Je=[];let me;const ye=Symbol(""),Ls=Symbol("");class Sr{constructor(t,i=null,s){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],Sl(this,s)}run(){if(!this.active)return this.fn();if(!Je.includes(this))try{return Je.push(me=this),Bl(),ae=1<<++ei,ei<=Rs?Cl(this):Qr(this),this.fn()}finally{ei<=Rs&&bl(this),ae=1<<--ei,Me(),Je.pop();const t=Je.length;me=t>0?Je[t-1]:void 0}}stop(){this.active&&(Qr(this),this.onStop&&this.onStop(),this.active=!1)}}function Qr(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let Ye=!0;const Cr=[];function qe(){Cr.push(Ye),Ye=!1}function Bl(){Cr.push(Ye),Ye=!0}function Me(){const e=Cr.pop();Ye=e===void 0?!0:e}function bt(e,t,i){if(!Ea())return;let s=Fs.get(e);s||Fs.set(e,s=new Map);let r=s.get(i);r||s.set(i,r=xr()),Fa(r)}function Ea(){return Ye&&me!==void 0}function Fa(e,t){let i=!1;ei<=Rs?Ta(e)||(e.n|=ae,i=!wa(e)):i=!e.has(me),i&&(e.add(me),me.deps.push(e))}function Yt(e,t,i,s,r,n){const o=Fs.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(i==="length"&&O(e))o.forEach((l,u)=>{(u==="length"||u>=s)&&a.push(l)});else switch(i!==void 0&&a.push(o.get(i)),t){case"add":O(e)?yr(i)&&a.push(o.get("length")):(a.push(o.get(ye)),ni(e)&&a.push(o.get(Ls)));break;case"delete":O(e)||(a.push(o.get(ye)),ni(e)&&a.push(o.get(Ls)));break;case"set":ni(e)&&a.push(o.get(ye));break}if(a.length===1)a[0]&&As(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);As(xr(l))}}function As(e,t){for(const i of O(e)?e:[...e])(i!==me||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}const Ml=gr("__proto__,__v_isRef,__isVue"),Ra=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(mr)),Il=br(),vl=br(!1,!0),Pl=br(!0),tn=Vl();function Vl(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const s=H(this);for(let n=0,o=this.length;n<o;n++)bt(s,"get",n+"");const r=s[t](...i);return r===-1||r===!1?s[t](...i.map(H)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){qe();const s=H(this)[t].apply(this,i);return Me(),s}}),e}function br(e=!1,t=!1){return function(s,r,n){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_raw"&&n===(e?t?Yl:Oa:t?ka:Da).get(s))return s;const o=O(s);if(!e&&o&&Y(tn,r))return Reflect.get(tn,r,n);const a=Reflect.get(s,r,n);return(mr(r)?Ra.has(r):Ml(r))||(e||bt(s,"get",r),t)?a:ht(a)?!o||!yr(r)?a.value:a:gt(a)?e?Na(a):Ir(a):a}}const wl=La(),Tl=La(!0);function La(e=!1){return function(i,s,r,n){let o=i[s];if(!e&&!Pr(r)&&(r=H(r),o=H(o),!O(i)&&ht(o)&&!ht(r)))return o.value=r,!0;const a=O(i)&&yr(s)?Number(s)<i.length:Y(i,s),l=Reflect.set(i,s,r,n);return i===H(n)&&(a?ui(r,o)&&Yt(i,"set",s,r):Yt(i,"add",s,r)),l}}function El(e,t){const i=Y(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&Yt(e,"delete",t,void 0),s}function Fl(e,t){const i=Reflect.has(e,t);return(!mr(t)||!Ra.has(t))&&bt(e,"has",t),i}function Rl(e){return bt(e,"iterate",O(e)?"length":ye),Reflect.ownKeys(e)}const Aa={get:Il,set:wl,deleteProperty:El,has:Fl,ownKeys:Rl},Ll={get:Pl,set(e,t){return!0},deleteProperty(e,t){return!0}},Al=at({},Aa,{get:vl,set:Tl}),Br=e=>e,Zi=e=>Reflect.getPrototypeOf(e);function Ci(e,t,i=!1,s=!1){e=e.__v_raw;const r=H(e),n=H(t);t!==n&&!i&&bt(r,"get",t),!i&&bt(r,"get",n);const{has:o}=Zi(r),a=s?Br:i?wr:ci;if(o.call(r,t))return a(e.get(t));if(o.call(r,n))return a(e.get(n));e!==r&&e.get(t)}function bi(e,t=!1){const i=this.__v_raw,s=H(i),r=H(e);return e!==r&&!t&&bt(s,"has",e),!t&&bt(s,"has",r),e===r?i.has(e):i.has(e)||i.has(r)}function Bi(e,t=!1){return e=e.__v_raw,!t&&bt(H(e),"iterate",ye),Reflect.get(e,"size",e)}function en(e){e=H(e);const t=H(this);return Zi(t).has.call(t,e)||(t.add(e),Yt(t,"add",e,e)),this}function sn(e,t){t=H(t);const i=H(this),{has:s,get:r}=Zi(i);let n=s.call(i,e);n||(e=H(e),n=s.call(i,e));const o=r.call(i,e);return i.set(e,t),n?ui(t,o)&&Yt(i,"set",e,t):Yt(i,"add",e,t),this}function rn(e){const t=H(this),{has:i,get:s}=Zi(t);let r=i.call(t,e);r||(e=H(e),r=i.call(t,e)),s&&s.call(t,e);const n=t.delete(e);return r&&Yt(t,"delete",e,void 0),n}function nn(){const e=H(this),t=e.size!==0,i=e.clear();return t&&Yt(e,"clear",void 0,void 0),i}function Mi(e,t){return function(s,r){const n=this,o=n.__v_raw,a=H(o),l=t?Br:e?wr:ci;return!e&&bt(a,"iterate",ye),o.forEach((u,h)=>s.call(r,l(u),l(h),n))}}function Ii(e,t,i){return function(...s){const r=this.__v_raw,n=H(r),o=ni(n),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=r[e](...s),h=i?Br:t?wr:ci;return!t&&bt(n,"iterate",l?Ls:ye),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[h(d[0]),h(d[1])]:h(d),done:f}},[Symbol.iterator](){return this}}}}function Wt(e){return function(...t){return e==="delete"?!1:this}}function Dl(){const e={get(n){return Ci(this,n)},get size(){return Bi(this)},has:bi,add:en,set:sn,delete:rn,clear:nn,forEach:Mi(!1,!1)},t={get(n){return Ci(this,n,!1,!0)},get size(){return Bi(this)},has:bi,add:en,set:sn,delete:rn,clear:nn,forEach:Mi(!1,!0)},i={get(n){return Ci(this,n,!0)},get size(){return Bi(this,!0)},has(n){return bi.call(this,n,!0)},add:Wt("add"),set:Wt("set"),delete:Wt("delete"),clear:Wt("clear"),forEach:Mi(!0,!1)},s={get(n){return Ci(this,n,!0,!0)},get size(){return Bi(this,!0)},has(n){return bi.call(this,n,!0)},add:Wt("add"),set:Wt("set"),delete:Wt("delete"),clear:Wt("clear"),forEach:Mi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=Ii(n,!1,!1),i[n]=Ii(n,!0,!1),t[n]=Ii(n,!1,!0),s[n]=Ii(n,!0,!0)}),[e,i,t,s]}const[kl,Ol,Nl,Ul]=Dl();function Mr(e,t){const i=t?e?Ul:Nl:e?Ol:kl;return(s,r,n)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?s:Reflect.get(Y(i,r)&&r in s?i:s,r,n)}const zl={get:Mr(!1,!1)},jl={get:Mr(!1,!0)},Xl={get:Mr(!0,!1)},Da=new WeakMap,ka=new WeakMap,Oa=new WeakMap,Yl=new WeakMap;function Hl(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $l(e){return e.__v_skip||!Object.isExtensible(e)?0:Hl(dl(e))}function Ir(e){return e&&e.__v_isReadonly?e:vr(e,!1,Aa,zl,Da)}function Wl(e){return vr(e,!1,Al,jl,ka)}function Na(e){return vr(e,!0,Ll,Xl,Oa)}function vr(e,t,i,s,r){if(!gt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const n=r.get(e);if(n)return n;const o=$l(e);if(o===0)return e;const a=new Proxy(e,o===2?s:i);return r.set(e,a),a}function ze(e){return Pr(e)?ze(e.__v_raw):!!(e&&e.__v_isReactive)}function Pr(e){return!!(e&&e.__v_isReadonly)}function Ua(e){return ze(e)||Pr(e)}function H(e){const t=e&&e.__v_raw;return t?H(t):e}function Vr(e){return ki(e,"__v_skip",!0),e}const ci=e=>gt(e)?Ir(e):e,wr=e=>gt(e)?Na(e):e;function za(e){Ea()&&(e=H(e),e.dep||(e.dep=xr()),Fa(e.dep))}function ja(e,t){e=H(e),e.dep&&As(e.dep)}function ht(e){return Boolean(e&&e.__v_isRef===!0)}function ql(e){return Gl(e,!1)}function Gl(e,t){return ht(e)?e:new Kl(e,t)}class Kl{constructor(t,i){this._shallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:H(t),this._value=i?t:ci(t)}get value(){return za(this),this._value}set value(t){t=this._shallow?t:H(t),ui(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:ci(t),ja(this))}}function Jl(e){return ht(e)?e.value:e}const Zl={get:(e,t,i)=>Jl(Reflect.get(e,t,i)),set:(e,t,i,s)=>{const r=e[t];return ht(r)&&!ht(i)?(r.value=i,!0):Reflect.set(e,t,i,s)}};function Xa(e){return ze(e)?e:new Proxy(e,Zl)}class Ql{constructor(t,i,s){this._setter=i,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new Sr(t,()=>{this._dirty||(this._dirty=!0,ja(this))}),this.__v_isReadonly=s}get value(){const t=H(this);return za(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function tu(e,t){let i,s;const r=U(e);return r?(i=e,s=Tt):(i=e.get,s=e.set),new Ql(i,s,r||!s)}Promise.resolve();function eu(e,t,...i){const s=e.vnode.props||G;let r=i;const n=t.startsWith("update:"),o=n&&t.slice(7);if(o&&o in s){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:f}=s[h]||G;f?r=i.map(_=>_.trim()):d&&(r=i.map(ml))}let a,l=s[a=ds(t)]||s[a=ds(Xe(t))];!l&&n&&(l=s[a=ds(We(t))]),l&&It(l,e,6,r);const u=s[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,It(u,e,6,r)}}function Ya(e,t,i=!1){const s=t.emitsCache,r=s.get(e);if(r!==void 0)return r;const n=e.emits;let o={},a=!1;if(!U(e)){const l=u=>{const h=Ya(u,t,!0);h&&(a=!0,at(o,h))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!n&&!a?(s.set(e,null),null):(O(n)?n.forEach(l=>o[l]=null):at(o,n),s.set(e,o),o)}function Tr(e,t){return!e||!Gi(t)?!1:(t=t.slice(2).replace(/Once$/,""),Y(e,t[0].toLowerCase()+t.slice(1))||Y(e,We(t))||Y(e,t))}let Dt=null,Ha=null;function Oi(e){const t=Dt;return Dt=e,Ha=e&&e.type.__scopeId||null,t}function iu(e,t=Dt,i){if(!t||e._n)return e;const s=(...r)=>{s._d&&fn(-1);const n=Oi(t),o=e(...r);return Oi(n),s._d&&fn(1),o};return s._n=!0,s._c=!0,s._d=!0,s}function _s(e){const{type:t,vnode:i,proxy:s,withProxy:r,props:n,propsOptions:[o],slots:a,attrs:l,emit:u,render:h,renderCache:d,data:f,setupState:_,ctx:m,inheritAttrs:B}=e;let y,x;const V=Oi(e);try{if(i.shapeFlag&4){const I=r||s;y=Lt(h.call(I,I,d,n,_,f,m)),x=l}else{const I=t;y=Lt(I.length>1?I(n,{attrs:l,slots:a,emit:u}):I(n,null)),x=t.props?l:su(l)}}catch(I){ai.length=0,is(I,e,1),y=Se(oe)}let T=y;if(x&&B!==!1){const I=Object.keys(x),{shapeFlag:z}=T;I.length&&z&7&&(o&&I.some(_r)&&(x=ru(x,o)),T=He(T,x))}return i.dirs&&(T.dirs=T.dirs?T.dirs.concat(i.dirs):i.dirs),i.transition&&(T.transition=i.transition),y=T,Oi(V),y}const su=e=>{let t;for(const i in e)(i==="class"||i==="style"||Gi(i))&&((t||(t={}))[i]=e[i]);return t},ru=(e,t)=>{const i={};for(const s in e)(!_r(s)||!(s.slice(9)in t))&&(i[s]=e[s]);return i};function nu(e,t,i){const{props:s,children:r,component:n}=e,{props:o,children:a,patchFlag:l}=t,u=n.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return s?an(s,o,u):!!o;if(l&8){const h=t.dynamicProps;for(let d=0;d<h.length;d++){const f=h[d];if(o[f]!==s[f]&&!Tr(u,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?an(s,o,u):!0:!!o;return!1}function an(e,t,i){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let r=0;r<s.length;r++){const n=s[r];if(t[n]!==e[n]&&!Tr(i,n))return!0}return!1}function au({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const ou=e=>e.__isSuspense;function lu(e,t){t&&t.pendingBranch?O(e)?t.effects.push(...e):t.effects.push(e):hc(e)}function uu(e,t){if(nt){let i=nt.provides;const s=nt.parent&&nt.parent.provides;s===i&&(i=nt.provides=Object.create(s)),i[e]=t}}function ps(e,t,i=!1){const s=nt||Dt;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return i&&U(t)?t.call(s.proxy):t}}function cu(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Er(()=>{e.isMounted=!0}),Ga(()=>{e.isUnmounting=!0}),e}const Bt=[Function,Array],hu={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Bt,onEnter:Bt,onAfterEnter:Bt,onEnterCancelled:Bt,onBeforeLeave:Bt,onLeave:Bt,onAfterLeave:Bt,onLeaveCancelled:Bt,onBeforeAppear:Bt,onAppear:Bt,onAfterAppear:Bt,onAppearCancelled:Bt},setup(e,{slots:t}){const i=tc(),s=cu();let r;return()=>{const n=t.default&&Wa(t.default(),!0);if(!n||!n.length)return;const o=H(e),{mode:a}=o,l=n[0];if(s.isLeaving)return ms(l);const u=on(l);if(!u)return ms(l);const h=Ds(u,o,s,i);ks(u,h);const d=i.subTree,f=d&&on(d);let _=!1;const{getTransitionKey:m}=u.type;if(m){const B=m();r===void 0?r=B:B!==r&&(r=B,_=!0)}if(f&&f.type!==oe&&(!pe(u,f)||_)){const B=Ds(f,o,s,i);if(ks(f,B),a==="out-in")return s.isLeaving=!0,B.afterLeave=()=>{s.isLeaving=!1,i.update()},ms(l);a==="in-out"&&u.type!==oe&&(B.delayLeave=(y,x,V)=>{const T=$a(s,f);T[String(f.key)]=f,y._leaveCb=()=>{x(),y._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=V})}return l}}},gu=hu;function $a(e,t){const{leavingVNodes:i}=e;let s=i.get(t.type);return s||(s=Object.create(null),i.set(t.type,s)),s}function Ds(e,t,i,s){const{appear:r,mode:n,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:d,onLeave:f,onAfterLeave:_,onLeaveCancelled:m,onBeforeAppear:B,onAppear:y,onAfterAppear:x,onAppearCancelled:V}=t,T=String(e.key),I=$a(i,e),z=(k,tt)=>{k&&It(k,s,9,tt)},st={mode:n,persisted:o,beforeEnter(k){let tt=a;if(!i.isMounted)if(r)tt=B||a;else return;k._leaveCb&&k._leaveCb(!0);const L=I[T];L&&pe(e,L)&&L.el._leaveCb&&L.el._leaveCb(),z(tt,[k])},enter(k){let tt=l,L=u,$=h;if(!i.isMounted)if(r)tt=y||l,L=x||u,$=V||h;else return;let rt=!1;const _t=k._enterCb=Ie=>{rt||(rt=!0,Ie?z($,[k]):z(L,[k]),st.delayedLeave&&st.delayedLeave(),k._enterCb=void 0)};tt?(tt(k,_t),tt.length<=1&&_t()):_t()},leave(k,tt){const L=String(e.key);if(k._enterCb&&k._enterCb(!0),i.isUnmounting)return tt();z(d,[k]);let $=!1;const rt=k._leaveCb=_t=>{$||($=!0,tt(),_t?z(m,[k]):z(_,[k]),k._leaveCb=void 0,I[L]===e&&delete I[L])};I[L]=e,f?(f(k,rt),f.length<=1&&rt()):rt()},clone(k){return Ds(k,t,i,s)}};return st}function ms(e){if(Qi(e))return e=He(e),e.children=null,e}function on(e){return Qi(e)?e.children?e.children[0]:void 0:e}function ks(e,t){e.shapeFlag&6&&e.component?ks(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Wa(e,t=!1){let i=[],s=0;for(let r=0;r<e.length;r++){const n=e[r];n.type===Rt?(n.patchFlag&128&&s++,i=i.concat(Wa(n.children,t))):(t||n.type!==oe)&&i.push(n)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function du(e){return U(e)?{setup:e,name:e.name}:e}const Os=e=>!!e.type.__asyncLoader,Qi=e=>e.type.__isKeepAlive;function fu(e,t){qa(e,"a",t)}function _u(e,t){qa(e,"da",t)}function qa(e,t,i=nt){const s=e.__wdc||(e.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(ts(t,s,i),i){let r=i.parent;for(;r&&r.parent;)Qi(r.parent.vnode)&&pu(s,t,i,r),r=r.parent}}function pu(e,t,i,s){const r=ts(t,e,s,!0);Ka(()=>{pr(s[t],r)},i)}function ts(e,t,i=nt,s=!1){if(i){const r=i[e]||(i[e]=[]),n=t.__weh||(t.__weh=(...o)=>{if(i.isUnmounted)return;qe(),$e(i);const a=It(t,i,e,o);return Ce(),Me(),a});return s?r.unshift(n):r.push(n),n}}const Ht=e=>(t,i=nt)=>(!ji||e==="sp")&&ts(e,t,i),mu=Ht("bm"),Er=Ht("m"),yu=Ht("bu"),xu=Ht("u"),Ga=Ht("bum"),Ka=Ht("um"),Su=Ht("sp"),Cu=Ht("rtg"),bu=Ht("rtc");function Bu(e,t=nt){ts("ec",e,t)}let Ns=!0;function Mu(e){const t=Za(e),i=e.proxy,s=e.ctx;Ns=!1,t.beforeCreate&&ln(t.beforeCreate,e,"bc");const{data:r,computed:n,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:f,beforeUpdate:_,updated:m,activated:B,deactivated:y,beforeDestroy:x,beforeUnmount:V,destroyed:T,unmounted:I,render:z,renderTracked:st,renderTriggered:k,errorCaptured:tt,serverPrefetch:L,expose:$,inheritAttrs:rt,components:_t,directives:Ie,filters:$r}=t;if(u&&Iu(u,s,null,e.appContext.config.unwrapInjectedRef),o)for(const et in o){const K=o[et];U(K)&&(s[et]=K.bind(i))}if(r){const et=r.call(i,i);gt(et)&&(e.data=Ir(et))}if(Ns=!0,n)for(const et in n){const K=n[et],kt=U(K)?K.bind(i,i):U(K.get)?K.get.bind(i,i):Tt,cs=!U(K)&&U(K.set)?K.set.bind(i):Tt,Ge=tu({get:kt,set:cs});Object.defineProperty(s,et,{enumerable:!0,configurable:!0,get:()=>Ge.value,set:ve=>Ge.value=ve})}if(a)for(const et in a)Ja(a[et],s,i,et);if(l){const et=U(l)?l.call(i):l;Reflect.ownKeys(et).forEach(K=>{uu(K,et[K])})}h&&ln(h,e,"c");function dt(et,K){O(K)?K.forEach(kt=>et(kt.bind(i))):K&&et(K.bind(i))}if(dt(mu,d),dt(Er,f),dt(yu,_),dt(xu,m),dt(fu,B),dt(_u,y),dt(Bu,tt),dt(bu,st),dt(Cu,k),dt(Ga,V),dt(Ka,I),dt(Su,L),O($))if($.length){const et=e.exposed||(e.exposed={});$.forEach(K=>{Object.defineProperty(et,K,{get:()=>i[K],set:kt=>i[K]=kt})})}else e.exposed||(e.exposed={});z&&e.render===Tt&&(e.render=z),rt!=null&&(e.inheritAttrs=rt),_t&&(e.components=_t),Ie&&(e.directives=Ie)}function Iu(e,t,i=Tt,s=!1){O(e)&&(e=Us(e));for(const r in e){const n=e[r];let o;gt(n)?"default"in n?o=ps(n.from||r,n.default,!0):o=ps(n.from||r):o=ps(n),ht(o)&&s?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):t[r]=o}}function ln(e,t,i){It(O(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,i)}function Ja(e,t,i,s){const r=s.includes(".")?yo(i,s):()=>i[s];if(ot(e)){const n=t[e];U(n)&&xs(r,n)}else if(U(e))xs(r,e.bind(i));else if(gt(e))if(O(e))e.forEach(n=>Ja(n,t,i,s));else{const n=U(e.handler)?e.handler.bind(i):t[e.handler];U(n)&&xs(r,n,e)}}function Za(e){const t=e.type,{mixins:i,extends:s}=t,{mixins:r,optionsCache:n,config:{optionMergeStrategies:o}}=e.appContext,a=n.get(t);let l;return a?l=a:!r.length&&!i&&!s?l=t:(l={},r.length&&r.forEach(u=>Ni(l,u,o,!0)),Ni(l,t,o)),n.set(t,l),l}function Ni(e,t,i,s=!1){const{mixins:r,extends:n}=t;n&&Ni(e,n,i,!0),r&&r.forEach(o=>Ni(e,o,i,!0));for(const o in t)if(!(s&&o==="expose")){const a=vu[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const vu={data:un,props:_e,emits:_e,methods:_e,computed:_e,beforeCreate:ct,created:ct,beforeMount:ct,mounted:ct,beforeUpdate:ct,updated:ct,beforeDestroy:ct,beforeUnmount:ct,destroyed:ct,unmounted:ct,activated:ct,deactivated:ct,errorCaptured:ct,serverPrefetch:ct,components:_e,directives:_e,watch:Vu,provide:un,inject:Pu};function un(e,t){return t?e?function(){return at(U(e)?e.call(this,this):e,U(t)?t.call(this,this):t)}:t:e}function Pu(e,t){return _e(Us(e),Us(t))}function Us(e){if(O(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function ct(e,t){return e?[...new Set([].concat(e,t))]:t}function _e(e,t){return e?at(at(Object.create(null),e),t):t}function Vu(e,t){if(!e)return t;if(!t)return e;const i=at(Object.create(null),e);for(const s in t)i[s]=ct(e[s],t[s]);return i}function wu(e,t,i,s=!1){const r={},n={};ki(n,es,1),e.propsDefaults=Object.create(null),Qa(e,t,r,n);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);i?e.props=s?r:Wl(r):e.type.props?e.props=r:e.props=n,e.attrs=n}function Tu(e,t,i,s){const{props:r,attrs:n,vnode:{patchFlag:o}}=e,a=H(r),[l]=e.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let d=0;d<h.length;d++){let f=h[d];const _=t[f];if(l)if(Y(n,f))_!==n[f]&&(n[f]=_,u=!0);else{const m=Xe(f);r[m]=zs(l,a,m,_,e,!1)}else _!==n[f]&&(n[f]=_,u=!0)}}}else{Qa(e,t,r,n)&&(u=!0);let h;for(const d in a)(!t||!Y(t,d)&&((h=We(d))===d||!Y(t,h)))&&(l?i&&(i[d]!==void 0||i[h]!==void 0)&&(r[d]=zs(l,a,d,void 0,e,!0)):delete r[d]);if(n!==a)for(const d in n)(!t||!Y(t,d))&&(delete n[d],u=!0)}u&&Yt(e,"set","$attrs")}function Qa(e,t,i,s){const[r,n]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Ri(l))continue;const u=t[l];let h;r&&Y(r,h=Xe(l))?!n||!n.includes(h)?i[h]=u:(a||(a={}))[h]=u:Tr(e.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(n){const l=H(i),u=a||G;for(let h=0;h<n.length;h++){const d=n[h];i[d]=zs(r,l,d,u[d],e,!Y(u,d))}}return o}function zs(e,t,i,s,r,n){const o=e[i];if(o!=null){const a=Y(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&U(l)){const{propsDefaults:u}=r;i in u?s=u[i]:($e(r),s=u[i]=l.call(null,t),Ce())}else s=l}o[0]&&(n&&!a?s=!1:o[1]&&(s===""||s===We(i))&&(s=!0))}return s}function to(e,t,i=!1){const s=t.propsCache,r=s.get(e);if(r)return r;const n=e.props,o={},a=[];let l=!1;if(!U(e)){const h=d=>{l=!0;const[f,_]=to(d,t,!0);at(o,f),_&&a.push(..._)};!i&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!n&&!l)return s.set(e,Ue),Ue;if(O(n))for(let h=0;h<n.length;h++){const d=Xe(n[h]);cn(d)&&(o[d]=G)}else if(n)for(const h in n){const d=Xe(h);if(cn(d)){const f=n[h],_=o[d]=O(f)||U(f)?{type:f}:f;if(_){const m=dn(Boolean,_.type),B=dn(String,_.type);_[0]=m>-1,_[1]=B<0||m<B,(m>-1||Y(_,"default"))&&a.push(d)}}}const u=[o,a];return s.set(e,u),u}function cn(e){return e[0]!=="$"}function hn(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function gn(e,t){return hn(e)===hn(t)}function dn(e,t){return O(t)?t.findIndex(i=>gn(i,e)):U(t)&&gn(t,e)?0:-1}const eo=e=>e[0]==="_"||e==="$stable",Fr=e=>O(e)?e.map(Lt):[Lt(e)],Eu=(e,t,i)=>{const s=iu((...r)=>Fr(t(...r)),i);return s._c=!1,s},io=(e,t,i)=>{const s=e._ctx;for(const r in e){if(eo(r))continue;const n=e[r];if(U(n))t[r]=Eu(r,n,s);else if(n!=null){const o=Fr(n);t[r]=()=>o}}},so=(e,t)=>{const i=Fr(t);e.slots.default=()=>i},Fu=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=H(t),ki(t,"_",i)):io(t,e.slots={})}else e.slots={},t&&so(e,t);ki(e.slots,es,1)},Ru=(e,t,i)=>{const{vnode:s,slots:r}=e;let n=!0,o=G;if(s.shapeFlag&32){const a=t._;a?i&&a===1?n=!1:(at(r,t),!i&&a===1&&delete r._):(n=!t.$stable,io(t,r)),o=t}else t&&(so(e,t),o={default:1});if(n)for(const a in r)!eo(a)&&!(a in o)&&delete r[a]};function le(e,t,i,s){const r=e.dirs,n=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];n&&(a.oldValue=n[o].value);let l=a.dir[s];l&&(qe(),It(l,i,8,[e.el,a,e,t]),Me())}}function ro(){return{app:null,config:{isNativeTag:ll,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Lu=0;function Au(e,t){return function(s,r=null){r!=null&&!gt(r)&&(r=null);const n=ro(),o=new Set;let a=!1;const l=n.app={_uid:Lu++,_component:s,_props:r,_container:null,_context:n,_instance:null,version:dc,get config(){return n.config},set config(u){},use(u,...h){return o.has(u)||(u&&U(u.install)?(o.add(u),u.install(l,...h)):U(u)&&(o.add(u),u(l,...h))),l},mixin(u){return n.mixins.includes(u)||n.mixins.push(u),l},component(u,h){return h?(n.components[u]=h,l):n.components[u]},directive(u,h){return h?(n.directives[u]=h,l):n.directives[u]},mount(u,h,d){if(!a){const f=Se(s,r);return f.appContext=n,h&&t?t(f,u):e(f,u,d),a=!0,l._container=u,u.__vue_app__=l,Ar(f.component)||f.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,h){return n.provides[u]=h,l}};return l}}function js(e,t,i,s,r=!1){if(O(e)){e.forEach((f,_)=>js(f,t&&(O(t)?t[_]:t),i,s,r));return}if(Os(s)&&!r)return;const n=s.shapeFlag&4?Ar(s.component)||s.component.proxy:s.el,o=r?null:n,{i:a,r:l}=e,u=t&&t.r,h=a.refs===G?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==l&&(ot(u)?(h[u]=null,Y(d,u)&&(d[u]=null)):ht(u)&&(u.value=null)),U(l))ne(l,a,12,[o,h]);else{const f=ot(l),_=ht(l);if(f||_){const m=()=>{if(e.f){const B=f?h[l]:l.value;r?O(B)&&pr(B,n):O(B)?B.includes(n)||B.push(n):f?h[l]=[n]:(l.value=[n],e.k&&(h[e.k]=l.value))}else f?(h[l]=o,Y(d,l)&&(d[l]=o)):ht(l)&&(l.value=o,e.k&&(h[e.k]=o))};o?(m.id=-1,ft(m,i)):m()}}}const ft=lu;function Du(e){return ku(e)}function ku(e,t){const i=yl();i.__VUE__=!0;const{insert:s,remove:r,patchProp:n,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:f,setScopeId:_=Tt,cloneNode:m,insertStaticContent:B}=e,y=(c,g,p,C=null,S=null,v=null,w=!1,M=null,P=!!g.dynamicChildren)=>{if(c===g)return;c&&!pe(c,g)&&(C=xi(c),$t(c,S,v,!0),c=null),g.patchFlag===-2&&(P=!1,g.dynamicChildren=null);const{type:b,ref:F,shapeFlag:E}=g;switch(b){case Rr:x(c,g,p,C);break;case oe:V(c,g,p,C);break;case ys:c==null&&T(g,p,C,w);break;case Rt:Ie(c,g,p,C,S,v,w,M,P);break;default:E&1?st(c,g,p,C,S,v,w,M,P):E&6?$r(c,g,p,C,S,v,w,M,P):(E&64||E&128)&&b.process(c,g,p,C,S,v,w,M,P,Pe)}F!=null&&S&&js(F,c&&c.ref,v,g||c,!g)},x=(c,g,p,C)=>{if(c==null)s(g.el=a(g.children),p,C);else{const S=g.el=c.el;g.children!==c.children&&u(S,g.children)}},V=(c,g,p,C)=>{c==null?s(g.el=l(g.children||""),p,C):g.el=c.el},T=(c,g,p,C)=>{[c.el,c.anchor]=B(c.children,g,p,C)},I=({el:c,anchor:g},p,C)=>{let S;for(;c&&c!==g;)S=f(c),s(c,p,C),c=S;s(g,p,C)},z=({el:c,anchor:g})=>{let p;for(;c&&c!==g;)p=f(c),r(c),c=p;r(g)},st=(c,g,p,C,S,v,w,M,P)=>{w=w||g.type==="svg",c==null?k(g,p,C,S,v,w,M,P):$(c,g,S,v,w,M,P)},k=(c,g,p,C,S,v,w,M)=>{let P,b;const{type:F,props:E,shapeFlag:R,transition:D,patchFlag:X,dirs:Q}=c;if(c.el&&m!==void 0&&X===-1)P=c.el=m(c.el);else{if(P=c.el=o(c.type,v,E&&E.is,E),R&8?h(P,c.children):R&16&&L(c.children,P,null,C,S,v&&F!=="foreignObject",w,M),Q&&le(c,null,C,"created"),E){for(const J in E)J!=="value"&&!Ri(J)&&n(P,J,null,E[J],v,c.children,C,S,Ot);"value"in E&&n(P,"value",null,E.value),(b=E.onVnodeBeforeMount)&&Ft(b,C,c)}tt(P,c,c.scopeId,w,C)}Q&&le(c,null,C,"beforeMount");const W=(!S||S&&!S.pendingBranch)&&D&&!D.persisted;W&&D.beforeEnter(P),s(P,g,p),((b=E&&E.onVnodeMounted)||W||Q)&&ft(()=>{b&&Ft(b,C,c),W&&D.enter(P),Q&&le(c,null,C,"mounted")},S)},tt=(c,g,p,C,S)=>{if(p&&_(c,p),C)for(let v=0;v<C.length;v++)_(c,C[v]);if(S){let v=S.subTree;if(g===v){const w=S.vnode;tt(c,w,w.scopeId,w.slotScopeIds,S.parent)}}},L=(c,g,p,C,S,v,w,M,P=0)=>{for(let b=P;b<c.length;b++){const F=c[b]=M?Qt(c[b]):Lt(c[b]);y(null,F,g,p,C,S,v,w,M)}},$=(c,g,p,C,S,v,w)=>{const M=g.el=c.el;let{patchFlag:P,dynamicChildren:b,dirs:F}=g;P|=c.patchFlag&16;const E=c.props||G,R=g.props||G;let D;p&&ue(p,!1),(D=R.onVnodeBeforeUpdate)&&Ft(D,p,g,c),F&&le(g,c,p,"beforeUpdate"),p&&ue(p,!0);const X=S&&g.type!=="foreignObject";if(b?rt(c.dynamicChildren,b,M,p,C,X,v):w||kt(c,g,M,null,p,C,X,v,!1),P>0){if(P&16)_t(M,g,E,R,p,C,S);else if(P&2&&E.class!==R.class&&n(M,"class",null,R.class,S),P&4&&n(M,"style",E.style,R.style,S),P&8){const Q=g.dynamicProps;for(let W=0;W<Q.length;W++){const J=Q[W],Pt=E[J],Ve=R[J];(Ve!==Pt||J==="value")&&n(M,J,Pt,Ve,S,c.children,p,C,Ot)}}P&1&&c.children!==g.children&&h(M,g.children)}else!w&&b==null&&_t(M,g,E,R,p,C,S);((D=R.onVnodeUpdated)||F)&&ft(()=>{D&&Ft(D,p,g,c),F&&le(g,c,p,"updated")},C)},rt=(c,g,p,C,S,v,w)=>{for(let M=0;M<g.length;M++){const P=c[M],b=g[M],F=P.el&&(P.type===Rt||!pe(P,b)||P.shapeFlag&70)?d(P.el):p;y(P,b,F,null,C,S,v,w,!0)}},_t=(c,g,p,C,S,v,w)=>{if(p!==C){for(const M in C){if(Ri(M))continue;const P=C[M],b=p[M];P!==b&&M!=="value"&&n(c,M,b,P,w,g.children,S,v,Ot)}if(p!==G)for(const M in p)!Ri(M)&&!(M in C)&&n(c,M,p[M],null,w,g.children,S,v,Ot);"value"in C&&n(c,"value",p.value,C.value)}},Ie=(c,g,p,C,S,v,w,M,P)=>{const b=g.el=c?c.el:a(""),F=g.anchor=c?c.anchor:a("");let{patchFlag:E,dynamicChildren:R,slotScopeIds:D}=g;D&&(M=M?M.concat(D):D),c==null?(s(b,p,C),s(F,p,C),L(g.children,p,F,S,v,w,M,P)):E>0&&E&64&&R&&c.dynamicChildren?(rt(c.dynamicChildren,R,p,S,v,w,M),(g.key!=null||S&&g===S.subTree)&&no(c,g,!0)):kt(c,g,p,F,S,v,w,M,P)},$r=(c,g,p,C,S,v,w,M,P)=>{g.slotScopeIds=M,c==null?g.shapeFlag&512?S.ctx.activate(g,p,C,w,P):us(g,p,C,S,v,w,P):dt(c,g,P)},us=(c,g,p,C,S,v,w)=>{const M=c.component=Qu(c,C,S);if(Qi(c)&&(M.ctx.renderer=Pe),ec(M),M.asyncDep){if(S&&S.registerDep(M,et),!c.el){const P=M.subTree=Se(oe);V(null,P,g,p)}return}et(M,c,g,p,S,v,w)},dt=(c,g,p)=>{const C=g.component=c.component;if(nu(c,g,p))if(C.asyncDep&&!C.asyncResolved){K(C,g,p);return}else C.next=g,uc(C.update),C.update();else g.component=c.component,g.el=c.el,C.vnode=g},et=(c,g,p,C,S,v,w)=>{const M=()=>{if(c.isMounted){let{next:F,bu:E,u:R,parent:D,vnode:X}=c,Q=F,W;ue(c,!1),F?(F.el=X.el,K(c,F,w)):F=X,E&&fs(E),(W=F.props&&F.props.onVnodeBeforeUpdate)&&Ft(W,D,F,X),ue(c,!0);const J=_s(c),Pt=c.subTree;c.subTree=J,y(Pt,J,d(Pt.el),xi(Pt),c,S,v),F.el=J.el,Q===null&&au(c,J.el),R&&ft(R,S),(W=F.props&&F.props.onVnodeUpdated)&&ft(()=>Ft(W,D,F,X),S)}else{let F;const{el:E,props:R}=g,{bm:D,m:X,parent:Q}=c,W=Os(g);if(ue(c,!1),D&&fs(D),!W&&(F=R&&R.onVnodeBeforeMount)&&Ft(F,Q,g),ue(c,!0),E&&gs){const J=()=>{c.subTree=_s(c),gs(E,c.subTree,c,S,null)};W?g.type.__asyncLoader().then(()=>!c.isUnmounted&&J()):J()}else{const J=c.subTree=_s(c);y(null,J,p,C,c,S,v),g.el=J.el}if(X&&ft(X,S),!W&&(F=R&&R.onVnodeMounted)){const J=g;ft(()=>Ft(F,Q,J),S)}g.shapeFlag&256&&c.a&&ft(c.a,S),c.isMounted=!0,g=p=C=null}},P=c.effect=new Sr(M,()=>ho(c.update),c.scope),b=c.update=P.run.bind(P);b.id=c.uid,ue(c,!0),b()},K=(c,g,p)=>{g.component=c;const C=c.vnode.props;c.vnode=g,c.next=null,Tu(c,g.props,C,p),Ru(c,g.children,p),qe(),kr(void 0,c.update),Me()},kt=(c,g,p,C,S,v,w,M,P=!1)=>{const b=c&&c.children,F=c?c.shapeFlag:0,E=g.children,{patchFlag:R,shapeFlag:D}=g;if(R>0){if(R&128){Ge(b,E,p,C,S,v,w,M,P);return}else if(R&256){cs(b,E,p,C,S,v,w,M,P);return}}D&8?(F&16&&Ot(b,S,v),E!==b&&h(p,E)):F&16?D&16?Ge(b,E,p,C,S,v,w,M,P):Ot(b,S,v,!0):(F&8&&h(p,""),D&16&&L(E,p,C,S,v,w,M,P))},cs=(c,g,p,C,S,v,w,M,P)=>{c=c||Ue,g=g||Ue;const b=c.length,F=g.length,E=Math.min(b,F);let R;for(R=0;R<E;R++){const D=g[R]=P?Qt(g[R]):Lt(g[R]);y(c[R],D,p,null,S,v,w,M,P)}b>F?Ot(c,S,v,!0,!1,E):L(g,p,C,S,v,w,M,P,E)},Ge=(c,g,p,C,S,v,w,M,P)=>{let b=0;const F=g.length;let E=c.length-1,R=F-1;for(;b<=E&&b<=R;){const D=c[b],X=g[b]=P?Qt(g[b]):Lt(g[b]);if(pe(D,X))y(D,X,p,null,S,v,w,M,P);else break;b++}for(;b<=E&&b<=R;){const D=c[E],X=g[R]=P?Qt(g[R]):Lt(g[R]);if(pe(D,X))y(D,X,p,null,S,v,w,M,P);else break;E--,R--}if(b>E){if(b<=R){const D=R+1,X=D<F?g[D].el:C;for(;b<=R;)y(null,g[b]=P?Qt(g[b]):Lt(g[b]),p,X,S,v,w,M,P),b++}}else if(b>R)for(;b<=E;)$t(c[b],S,v,!0),b++;else{const D=b,X=b,Q=new Map;for(b=X;b<=R;b++){const pt=g[b]=P?Qt(g[b]):Lt(g[b]);pt.key!=null&&Q.set(pt.key,b)}let W,J=0;const Pt=R-X+1;let Ve=!1,Gr=0;const Ke=new Array(Pt);for(b=0;b<Pt;b++)Ke[b]=0;for(b=D;b<=E;b++){const pt=c[b];if(J>=Pt){$t(pt,S,v,!0);continue}let Et;if(pt.key!=null)Et=Q.get(pt.key);else for(W=X;W<=R;W++)if(Ke[W-X]===0&&pe(pt,g[W])){Et=W;break}Et===void 0?$t(pt,S,v,!0):(Ke[Et-X]=b+1,Et>=Gr?Gr=Et:Ve=!0,y(pt,g[Et],p,null,S,v,w,M,P),J++)}const Kr=Ve?Ou(Ke):Ue;for(W=Kr.length-1,b=Pt-1;b>=0;b--){const pt=X+b,Et=g[pt],Jr=pt+1<F?g[pt+1].el:C;Ke[b]===0?y(null,Et,p,Jr,S,v,w,M,P):Ve&&(W<0||b!==Kr[W]?ve(Et,p,Jr,2):W--)}}},ve=(c,g,p,C,S=null)=>{const{el:v,type:w,transition:M,children:P,shapeFlag:b}=c;if(b&6){ve(c.component.subTree,g,p,C);return}if(b&128){c.suspense.move(g,p,C);return}if(b&64){w.move(c,g,p,Pe);return}if(w===Rt){s(v,g,p);for(let E=0;E<P.length;E++)ve(P[E],g,p,C);s(c.anchor,g,p);return}if(w===ys){I(c,g,p);return}if(C!==2&&b&1&&M)if(C===0)M.beforeEnter(v),s(v,g,p),ft(()=>M.enter(v),S);else{const{leave:E,delayLeave:R,afterLeave:D}=M,X=()=>s(v,g,p),Q=()=>{E(v,()=>{X(),D&&D()})};R?R(v,X,Q):Q()}else s(v,g,p)},$t=(c,g,p,C=!1,S=!1)=>{const{type:v,props:w,ref:M,children:P,dynamicChildren:b,shapeFlag:F,patchFlag:E,dirs:R}=c;if(M!=null&&js(M,null,p,c,!0),F&256){g.ctx.deactivate(c);return}const D=F&1&&R,X=!Os(c);let Q;if(X&&(Q=w&&w.onVnodeBeforeUnmount)&&Ft(Q,g,c),F&6)Qo(c.component,p,C);else{if(F&128){c.suspense.unmount(p,C);return}D&&le(c,null,g,"beforeUnmount"),F&64?c.type.remove(c,g,p,S,Pe,C):b&&(v!==Rt||E>0&&E&64)?Ot(b,g,p,!1,!0):(v===Rt&&E&384||!S&&F&16)&&Ot(P,g,p),C&&Wr(c)}(X&&(Q=w&&w.onVnodeUnmounted)||D)&&ft(()=>{Q&&Ft(Q,g,c),D&&le(c,null,g,"unmounted")},p)},Wr=c=>{const{type:g,el:p,anchor:C,transition:S}=c;if(g===Rt){Zo(p,C);return}if(g===ys){z(c);return}const v=()=>{r(p),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(c.shapeFlag&1&&S&&!S.persisted){const{leave:w,delayLeave:M}=S,P=()=>w(p,v);M?M(c.el,v,P):P()}else v()},Zo=(c,g)=>{let p;for(;c!==g;)p=f(c),r(c),c=p;r(g)},Qo=(c,g,p)=>{const{bum:C,scope:S,update:v,subTree:w,um:M}=c;C&&fs(C),S.stop(),v&&(v.active=!1,$t(w,c,g,p)),M&&ft(M,g),ft(()=>{c.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&c.asyncDep&&!c.asyncResolved&&c.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},Ot=(c,g,p,C=!1,S=!1,v=0)=>{for(let w=v;w<c.length;w++)$t(c[w],g,p,C,S)},xi=c=>c.shapeFlag&6?xi(c.component.subTree):c.shapeFlag&128?c.suspense.next():f(c.anchor||c.el),qr=(c,g,p)=>{c==null?g._vnode&&$t(g._vnode,null,null,!0):y(g._vnode||null,c,g,null,null,null,p),_o(),g._vnode=c},Pe={p:y,um:$t,m:ve,r:Wr,mt:us,mc:L,pc:kt,pbc:rt,n:xi,o:e};let hs,gs;return t&&([hs,gs]=t(Pe)),{render:qr,hydrate:hs,createApp:Au(qr,hs)}}function ue({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function no(e,t,i=!1){const s=e.children,r=t.children;if(O(s)&&O(r))for(let n=0;n<s.length;n++){const o=s[n];let a=r[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[n]=Qt(r[n]),a.el=o.el),i||no(o,a))}}function Ou(e){const t=e.slice(),i=[0];let s,r,n,o,a;const l=e.length;for(s=0;s<l;s++){const u=e[s];if(u!==0){if(r=i[i.length-1],e[r]<u){t[s]=r,i.push(s);continue}for(n=0,o=i.length-1;n<o;)a=n+o>>1,e[i[a]]<u?n=a+1:o=a;u<e[i[n]]&&(n>0&&(t[s]=i[n-1]),i[n]=s)}}for(n=i.length,o=i[n-1];n-- >0;)i[n]=o,o=t[o];return i}const Nu=e=>e.__isTeleport,Uu=Symbol(),Rt=Symbol(void 0),Rr=Symbol(void 0),oe=Symbol(void 0),ys=Symbol(void 0),ai=[];let xe=null;function zu(e=!1){ai.push(xe=e?null:[])}function ju(){ai.pop(),xe=ai[ai.length-1]||null}let Ui=1;function fn(e){Ui+=e}function Xu(e){return e.dynamicChildren=Ui>0?xe||Ue:null,ju(),Ui>0&&xe&&xe.push(e),e}function Yu(e,t,i,s,r,n){return Xu(oo(e,t,i,s,r,n,!0))}function Hu(e){return e?e.__v_isVNode===!0:!1}function pe(e,t){return e.type===t.type&&e.key===t.key}const es="__vInternal",ao=({key:e})=>e!=null?e:null,Li=({ref:e,ref_key:t,ref_for:i})=>e!=null?ot(e)||ht(e)||U(e)?{i:Dt,r:e,k:t,f:!!i}:e:null;function oo(e,t=null,i=null,s=0,r=null,n=e===Rt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ao(t),ref:t&&Li(t),scopeId:Ha,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(Lr(l,i),n&128&&e.normalize(l)):i&&(l.shapeFlag|=ot(i)?8:16),Ui>0&&!o&&xe&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&xe.push(l),l}const Se=$u;function $u(e,t=null,i=null,s=0,r=null,n=!1){if((!e||e===Uu)&&(e=oe),Hu(e)){const a=He(e,t,!0);return i&&Lr(a,i),a}if(nc(e)&&(e=e.__vccOpts),t){t=Wu(t);let{class:a,style:l}=t;a&&!ot(a)&&(t.class=fr(a)),gt(l)&&(Ua(l)&&!O(l)&&(l=at({},l)),t.style=dr(l))}const o=ot(e)?1:ou(e)?128:Nu(e)?64:gt(e)?4:U(e)?2:0;return oo(e,t,i,s,r,o,n,!0)}function Wu(e){return e?Ua(e)||es in e?at({},e):e:null}function He(e,t,i=!1){const{props:s,ref:r,patchFlag:n,children:o}=e,a=t?Gu(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&ao(a),ref:t&&t.ref?i&&r?O(r)?r.concat(Li(t)):[r,Li(t)]:Li(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Rt?n===-1?16:n|16:n,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&He(e.ssContent),ssFallback:e.ssFallback&&He(e.ssFallback),el:e.el,anchor:e.anchor}}function qu(e=" ",t=0){return Se(Rr,null,e,t)}function Lt(e){return e==null||typeof e=="boolean"?Se(oe):O(e)?Se(Rt,null,e.slice()):typeof e=="object"?Qt(e):Se(Rr,null,String(e))}function Qt(e){return e.el===null||e.memo?e:He(e)}function Lr(e,t){let i=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(O(t))i=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),Lr(e,r()),r._c&&(r._d=!0));return}else{i=32;const r=t._;!r&&!(es in t)?t._ctx=Dt:r===3&&Dt&&(Dt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else U(t)?(t={default:t,_ctx:Dt},i=32):(t=String(t),s&64?(i=16,t=[qu(t)]):i=8);e.children=t,e.shapeFlag|=i}function Gu(...e){const t={};for(let i=0;i<e.length;i++){const s=e[i];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=fr([t.class,s.class]));else if(r==="style")t.style=dr([t.style,s.style]);else if(Gi(r)){const n=t[r],o=s[r];n!==o&&!(O(n)&&n.includes(o))&&(t[r]=n?[].concat(n,o):o)}else r!==""&&(t[r]=s[r])}return t}function Ft(e,t,i,s=null){It(e,t,7,[i,s])}const Xs=e=>e?lo(e)?Ar(e)||e.proxy:Xs(e.parent):null,zi=at(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Xs(e.parent),$root:e=>Xs(e.root),$emit:e=>e.emit,$options:e=>Za(e),$forceUpdate:e=>()=>ho(e.update),$nextTick:e=>oc.bind(e.proxy),$watch:e=>gc.bind(e)}),Ku={get({_:e},t){const{ctx:i,setupState:s,data:r,props:n,accessCache:o,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const _=o[t];if(_!==void 0)switch(_){case 1:return s[t];case 2:return r[t];case 4:return i[t];case 3:return n[t]}else{if(s!==G&&Y(s,t))return o[t]=1,s[t];if(r!==G&&Y(r,t))return o[t]=2,r[t];if((u=e.propsOptions[0])&&Y(u,t))return o[t]=3,n[t];if(i!==G&&Y(i,t))return o[t]=4,i[t];Ns&&(o[t]=0)}}const h=zi[t];let d,f;if(h)return t==="$attrs"&&bt(e,"get",t),h(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(i!==G&&Y(i,t))return o[t]=4,i[t];if(f=l.config.globalProperties,Y(f,t))return f[t]},set({_:e},t,i){const{data:s,setupState:r,ctx:n}=e;if(r!==G&&Y(r,t))r[t]=i;else if(s!==G&&Y(s,t))s[t]=i;else if(Y(e.props,t))return!1;return t[0]==="$"&&t.slice(1)in e?!1:(n[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:s,appContext:r,propsOptions:n}},o){let a;return!!i[o]||e!==G&&Y(e,o)||t!==G&&Y(t,o)||(a=n[0])&&Y(a,o)||Y(s,o)||Y(zi,o)||Y(r.config.globalProperties,o)}},Ju=ro();let Zu=0;function Qu(e,t,i){const s=e.type,r=(t?t.appContext:e.appContext)||Ju,n={uid:Zu++,vnode:e,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new xl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:to(s,r),emitsOptions:Ya(s,r),emit:null,emitted:null,propsDefaults:G,inheritAttrs:s.inheritAttrs,ctx:G,data:G,props:G,attrs:G,slots:G,refs:G,setupState:G,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=eu.bind(null,n),e.ce&&e.ce(n),n}let nt=null;const tc=()=>nt||Dt,$e=e=>{nt=e,e.scope.on()},Ce=()=>{nt&&nt.scope.off(),nt=null};function lo(e){return e.vnode.shapeFlag&4}let ji=!1;function ec(e,t=!1){ji=t;const{props:i,children:s}=e.vnode,r=lo(e);wu(e,i,r,t),Fu(e,s);const n=r?ic(e,t):void 0;return ji=!1,n}function ic(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=Vr(new Proxy(e.ctx,Ku));const{setup:s}=i;if(s){const r=e.setupContext=s.length>1?rc(e):null;$e(e),qe();const n=ne(s,e,0,[e.props,r]);if(Me(),Ce(),Pa(n)){if(n.then(Ce,Ce),t)return n.then(o=>{_n(e,o,t)}).catch(o=>{is(o,e,0)});e.asyncDep=n}else _n(e,n,t)}else uo(e,t)}function _n(e,t,i){U(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:gt(t)&&(e.setupState=Xa(t)),uo(e,i)}let pn;function uo(e,t,i){const s=e.type;if(!e.render){if(!t&&pn&&!s.render){const r=s.template;if(r){const{isCustomElement:n,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=s,u=at(at({isCustomElement:n,delimiters:a},o),l);s.render=pn(r,u)}}e.render=s.render||Tt}$e(e),qe(),Mu(e),Me(),Ce()}function sc(e){return new Proxy(e.attrs,{get(t,i){return bt(e,"get","$attrs"),t[i]}})}function rc(e){const t=s=>{e.exposed=s||{}};let i;return{get attrs(){return i||(i=sc(e))},slots:e.slots,emit:e.emit,expose:t}}function Ar(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Xa(Vr(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in zi)return zi[i](e)}}))}function nc(e){return U(e)&&"__vccOpts"in e}function ne(e,t,i,s){let r;try{r=s?e(...s):e()}catch(n){is(n,t,i)}return r}function It(e,t,i,s){if(U(e)){const n=ne(e,t,i,s);return n&&Pa(n)&&n.catch(o=>{is(o,t,i)}),n}const r=[];for(let n=0;n<e.length;n++)r.push(It(e[n],t,i,s));return r}function is(e,t,i,s=!0){const r=t?t.vnode:null;if(t){let n=t.parent;const o=t.proxy,a=i;for(;n;){const u=n.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,o,a)===!1)return}n=n.parent}const l=t.appContext.config.errorHandler;if(l){ne(l,null,10,[e,o,a]);return}}ac(e,i,r,s)}function ac(e,t,i,s=!0){console.error(e)}let Xi=!1,Ys=!1;const St=[];let zt=0;const oi=[];let ii=null,Le=0;const li=[];let Zt=null,Ae=0;const co=Promise.resolve();let Dr=null,Hs=null;function oc(e){const t=Dr||co;return e?t.then(this?e.bind(this):e):t}function lc(e){let t=zt+1,i=St.length;for(;t<i;){const s=t+i>>>1;hi(St[s])<e?t=s+1:i=s}return t}function ho(e){(!St.length||!St.includes(e,Xi&&e.allowRecurse?zt+1:zt))&&e!==Hs&&(e.id==null?St.push(e):St.splice(lc(e.id),0,e),go())}function go(){!Xi&&!Ys&&(Ys=!0,Dr=co.then(po))}function uc(e){const t=St.indexOf(e);t>zt&&St.splice(t,1)}function fo(e,t,i,s){O(e)?i.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&i.push(e),go()}function cc(e){fo(e,ii,oi,Le)}function hc(e){fo(e,Zt,li,Ae)}function kr(e,t=null){if(oi.length){for(Hs=t,ii=[...new Set(oi)],oi.length=0,Le=0;Le<ii.length;Le++)ii[Le]();ii=null,Le=0,Hs=null,kr(e,t)}}function _o(e){if(li.length){const t=[...new Set(li)];if(li.length=0,Zt){Zt.push(...t);return}for(Zt=t,Zt.sort((i,s)=>hi(i)-hi(s)),Ae=0;Ae<Zt.length;Ae++)Zt[Ae]();Zt=null,Ae=0}}const hi=e=>e.id==null?1/0:e.id;function po(e){Ys=!1,Xi=!0,kr(e),St.sort((i,s)=>hi(i)-hi(s));const t=Tt;try{for(zt=0;zt<St.length;zt++){const i=St[zt];i&&i.active!==!1&&ne(i,null,14)}}finally{zt=0,St.length=0,_o(),Xi=!1,Dr=null,(St.length||oi.length||li.length)&&po(e)}}const mn={};function xs(e,t,i){return mo(e,t,i)}function mo(e,t,{immediate:i,deep:s,flush:r,onTrack:n,onTrigger:o}=G){const a=nt;let l,u=!1,h=!1;if(ht(e)?(l=()=>e.value,u=!!e._shallow):ze(e)?(l=()=>e,s=!0):O(e)?(h=!0,u=e.some(ze),l=()=>e.map(x=>{if(ht(x))return x.value;if(ze(x))return De(x);if(U(x))return ne(x,a,2)})):U(e)?t?l=()=>ne(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return d&&d(),It(e,a,3,[f])}:l=Tt,t&&s){const x=l;l=()=>De(x())}let d,f=x=>{d=y.onStop=()=>{ne(x,a,4)}};if(ji)return f=Tt,t?i&&It(t,a,3,[l(),h?[]:void 0,f]):l(),Tt;let _=h?[]:mn;const m=()=>{if(!!y.active)if(t){const x=y.run();(s||u||(h?x.some((V,T)=>ui(V,_[T])):ui(x,_)))&&(d&&d(),It(t,a,3,[x,_===mn?void 0:_,f]),_=x)}else y.run()};m.allowRecurse=!!t;let B;r==="sync"?B=m:r==="post"?B=()=>ft(m,a&&a.suspense):B=()=>{!a||a.isMounted?cc(m):m()};const y=new Sr(l,B);return t?i?m():_=y.run():r==="post"?ft(y.run.bind(y),a&&a.suspense):y.run(),()=>{y.stop(),a&&a.scope&&pr(a.scope.effects,y)}}function gc(e,t,i){const s=this.proxy,r=ot(e)?e.includes(".")?yo(s,e):()=>s[e]:e.bind(s,s);let n;U(t)?n=t:(n=t.handler,i=t);const o=nt;$e(this);const a=mo(r,n.bind(s),i);return o?$e(o):Ce(),a}function yo(e,t){const i=t.split(".");return()=>{let s=e;for(let r=0;r<i.length&&s;r++)s=s[i[r]];return s}}function De(e,t){if(!gt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),ht(e))De(e.value,t);else if(O(e))for(let i=0;i<e.length;i++)De(e[i],t);else if(hl(e)||ni(e))e.forEach(i=>{De(i,t)});else if(fl(e))for(const i in e)De(e[i],t);return e}const dc="3.2.26",fc="http://www.w3.org/2000/svg",we=typeof document!="undefined"?document:null,yn=new Map,_c={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,s)=>{const r=t?we.createElementNS(fc,e):we.createElement(e,i?{is:i}:void 0);return e==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:e=>we.createTextNode(e),createComment:e=>we.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>we.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,i,s){const r=i?i.previousSibling:t.lastChild;let n=yn.get(e);if(!n){const o=we.createElement("template");if(o.innerHTML=s?`<svg>${e}</svg>`:e,n=o.content,s){const a=n.firstChild;for(;a.firstChild;)n.appendChild(a.firstChild);n.removeChild(a)}yn.set(e,n)}return t.insertBefore(n.cloneNode(!0),i),[r?r.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function pc(e,t,i){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function mc(e,t,i){const s=e.style,r=ot(i);if(i&&!r){for(const n in i)$s(s,n,i[n]);if(t&&!ot(t))for(const n in t)i[n]==null&&$s(s,n,"")}else{const n=s.display;r?t!==i&&(s.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=n)}}const xn=/\s*!important$/;function $s(e,t,i){if(O(i))i.forEach(s=>$s(e,t,s));else if(t.startsWith("--"))e.setProperty(t,i);else{const s=yc(e,t);xn.test(i)?e.setProperty(We(s),i.replace(xn,""),"important"):e[s]=i}}const Sn=["Webkit","Moz","ms"],Ss={};function yc(e,t){const i=Ss[t];if(i)return i;let s=Xe(t);if(s!=="filter"&&s in e)return Ss[t]=s;s=Va(s);for(let r=0;r<Sn.length;r++){const n=Sn[r]+s;if(n in e)return Ss[t]=n}return t}const Cn="http://www.w3.org/1999/xlink";function xc(e,t,i,s,r){if(s&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(Cn,t.slice(6,t.length)):e.setAttributeNS(Cn,t,i);else{const n=rl(t);i==null||n&&!va(i)?e.removeAttribute(t):e.setAttribute(t,n?"":i)}}function Sc(e,t,i,s,r,n,o){if(t==="innerHTML"||t==="textContent"){s&&o(s,r,n),e[t]=i==null?"":i;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=i;const a=i==null?"":i;(e.value!==a||e.tagName==="OPTION")&&(e.value=a),i==null&&e.removeAttribute(t);return}if(i===""||i==null){const a=typeof e[t];if(a==="boolean"){e[t]=va(i);return}else if(i==null&&a==="string"){e[t]="",e.removeAttribute(t);return}else if(a==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=i}catch{}}let Yi=Date.now,xo=!1;if(typeof window!="undefined"){Yi()>document.createEvent("Event").timeStamp&&(Yi=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);xo=!!(e&&Number(e[1])<=53)}let Ws=0;const Cc=Promise.resolve(),bc=()=>{Ws=0},Bc=()=>Ws||(Cc.then(bc),Ws=Yi());function Mc(e,t,i,s){e.addEventListener(t,i,s)}function Ic(e,t,i,s){e.removeEventListener(t,i,s)}function vc(e,t,i,s,r=null){const n=e._vei||(e._vei={}),o=n[t];if(s&&o)o.value=s;else{const[a,l]=Pc(t);if(s){const u=n[t]=Vc(s,r);Mc(e,a,u,l)}else o&&(Ic(e,a,o,l),n[t]=void 0)}}const bn=/(?:Once|Passive|Capture)$/;function Pc(e){let t;if(bn.test(e)){t={};let i;for(;i=e.match(bn);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[We(e.slice(2)),t]}function Vc(e,t){const i=s=>{const r=s.timeStamp||Yi();(xo||r>=i.attached-1)&&It(wc(s,i.value),t,5,[s])};return i.value=e,i.attached=Bc(),i}function wc(e,t){if(O(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(s=>r=>!r._stopped&&s(r))}else return t}const Bn=/^on[a-z]/,Tc=(e,t,i,s,r=!1,n,o,a,l)=>{t==="class"?pc(e,s,r):t==="style"?mc(e,i,s):Gi(t)?_r(t)||vc(e,t,i,s,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ec(e,t,s,r))?Sc(e,t,s,n,o,a,l):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),xc(e,t,s,r))};function Ec(e,t,i,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&Bn.test(t)&&U(i)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Bn.test(t)&&ot(i)?!1:t in e}const Fc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};gu.props;const Rc=at({patchProp:Tc},_c);let Mn;function Lc(){return Mn||(Mn=Du(Rc))}const Ac=(...e)=>{const t=Lc().createApp(...e),{mount:i}=t;return t.mount=s=>{const r=Dc(s);if(!r)return;const n=t._component;!U(n)&&!n.render&&!n.template&&(n.template=r.innerHTML),r.innerHTML="";const o=i(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function Dc(e){return ot(e)?document.querySelector(e):e}class So{constructor(){ut(this,"angleX",0);ut(this,"angleY",0);ut(this,"angleZ",0);ut(this,"angleEyeX",0);ut(this,"angleEyeY",0);ut(this,"mouseDistance",0);ut(this,"autoBlink",!1)}}const qs=class{constructor(e=0){e<1?(this._ptr=[],this._capacity=0,this._size=0):(this._ptr=new Array(e),this._capacity=e,this._size=0)}at(e){return this._ptr[e]}set(e,t){this._ptr[e]=t}get(e=0){const t=new Array;for(let i=e;i<this._size;i++)t.push(this._ptr[i]);return t}pushBack(e){this._size>=this._capacity&&this.prepareCapacity(this._capacity==0?qs.s_defaultSize:this._capacity*2),this._ptr[this._size++]=e}clear(){this._ptr.length=0,this._size=0}getSize(){return this._size}assign(e,t){this._size<e&&this.prepareCapacity(e);for(let s=0;s<e;s++)this._ptr[s]=t;this._size=e}resize(e,t=null){this.updateSize(e,t,!0)}updateSize(e,t=null,i=!0){if(this._size<e)if(this.prepareCapacity(e),i)for(let r=this._size;r<e;r++)typeof t=="function"?this._ptr[r]=JSON.parse(JSON.stringify(new t)):this._ptr[r]=t;else for(let r=this._size;r<e;r++)this._ptr[r]=t;else{const r=this._size-e;this._ptr.splice(this._size-r,r)}this._size=e}insert(e,t,i){let s=e._index;const r=t._index,n=i._index,o=n-r;this.prepareCapacity(this._size+o);const a=this._size-s;if(a>0)for(let l=0;l<a;l++)this._ptr.splice(s+l,0,null);for(let l=r;l<n;l++,s++)this._ptr[s]=t._vector._ptr[l];this._size=this._size+o}remove(e){return e<0||this._size<=e?!1:(this._ptr.splice(e,1),--this._size,!0)}erase(e){const t=e._index;return t<0||this._size<=t?e:(this._ptr.splice(t,1),--this._size,new be(this,t))}prepareCapacity(e){e>this._capacity&&(this._capacity==0?(this._ptr=new Array(e),this._capacity=e):(this._ptr.length=e,this._capacity=e))}begin(){return this._size==0?this.end():new be(this,0)}end(){return new be(this,this._size)}getOffset(e){const t=new qs;return t._ptr=this.get(e),t._size=this.get(e).length,t._capacity=this.get(e).length,t}};let j=qs;j.s_defaultSize=10;class be{constructor(t,i){this._vector=t!=null?t:null,this._index=i!=null?i:0}set(t){return this._index=t._index,this._vector=t._vector,this}preIncrement(){return++this._index,this}preDecrement(){return--this._index,this}increment(){return new be(this._vector,this._index++)}decrement(){return new be(this._vector,this._index--)}ptr(){return this._vector._ptr[this._index]}substitution(t){return this._index=t._index,this._vector=t._vector,this}notEqual(t){return this._index!=t._index||this._vector!=t._vector}}var Gs;(e=>{e.csmVector=j,e.iterator=be})(Gs||(Gs={}));class vt{append(t,i){return this.s+=i!==void 0?t.substr(0,i):t,this}expansion(t,i){for(let s=0;s<t;s++)this.append(i);return this}getBytes(){return encodeURIComponent(this.s).replace(/%../g,"x").length}getLength(){return this.s.length}isLess(t){return this.s<t.s}isGreat(t){return this.s>t.s}isEqual(t){return this.s==t}isEmpty(){return this.s.length==0}constructor(t){this.s=t}}var In;(e=>{e.csmString=vt})(In||(In={}));class gi{getString(){return this._id}constructor(t){if(typeof t=="string"){this._id=new vt(t);return}this._id=t}isEqual(t){return typeof t=="string"?this._id.isEqual(t):t instanceof vt?this._id.isEqual(t.s):t instanceof gi?this._id.isEqual(t._id.s):!1}isNotEqual(t){return typeof t=="string"?!this._id.isEqual(t):t instanceof vt?!this._id.isEqual(t.s):t instanceof gi?!this._id.isEqual(t._id.s):!1}}var vn;(e=>{e.CubismId=gi})(vn||(vn={}));class Co{constructor(){this._ids=new j}release(){for(let t=0;t<this._ids.getSize();++t)this._ids.set(t,void 0);this._ids=null}registerIds(t){for(let i=0;i<t.length;i++)this.registerId(t[i])}registerId(t){let i=null;if(typeof t=="string"){if((i=this.findId(t))!=null)return i;i=new gi(t),this._ids.pushBack(i)}else return this.registerId(t.s);return i}getId(t){return this.registerId(t)}isExist(t){return typeof t=="string"?this.findId(t)!=null:this.isExist(t.s)}findId(t){for(let i=0;i<this._ids.getSize();++i)if(this._ids.at(i).getString().isEqual(t))return this._ids.at(i);return null}}var Pn;(e=>{e.CubismIdManager=Co})(Pn||(Pn={}));class Ct{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(t,i,s){const r=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n=4;for(let o=0;o<n;++o)for(let a=0;a<n;++a)for(let l=0;l<n;++l)r[a+o*4]+=t[l+o*4]*i[a+l*4];for(let o=0;o<16;++o)s[o]=r[o]}loadIdentity(){const t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(t)}setMatrix(t){for(let i=0;i<16;++i)this._tr[i]=t[i]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(t){return this._tr[0]*t+this._tr[12]}transformY(t){return this._tr[5]*t+this._tr[13]}invertTransformX(t){return(t-this._tr[12])/this._tr[0]}invertTransformY(t){return(t-this._tr[13])/this._tr[5]}translateRelative(t,i){const s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,i,0,1]);Ct.multiply(s,this._tr,this._tr)}translate(t,i){this._tr[12]=t,this._tr[13]=i}translateX(t){this._tr[12]=t}translateY(t){this._tr[13]=t}scaleRelative(t,i){const s=new Float32Array([t,0,0,0,0,i,0,0,0,0,1,0,0,0,0,1]);Ct.multiply(s,this._tr,this._tr)}scale(t,i){this._tr[0]=t,this._tr[5]=i}multiplyByMatrix(t){Ct.multiply(t.getArray(),this._tr,this._tr)}clone(){const t=new Ct;for(let i=0;i<this._tr.length;i++)t._tr[i]=this._tr[i];return t}}var Ks;(e=>{e.CubismMatrix44=Ct})(Ks||(Ks={}));class ss{static create(){return null}static delete(t){}initialize(t){this._model=t}drawModel(){this.getModel()!=null&&this.doDrawModel()}setMvpMatrix(t){this._mvpMatrix4x4.setMatrix(t.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(t,i,s,r){t<0?t=0:t>1&&(t=1),i<0?i=0:i>1&&(i=1),s<0?s=0:s>1&&(s=1),r<0?r=0:r>1&&(r=1),this._modelColor.R=t,this._modelColor.G=i,this._modelColor.B=s,this._modelColor.A=r}getModelColor(){return JSON.parse(JSON.stringify(this._modelColor))}setIsPremultipliedAlpha(t){this._isPremultipliedAlpha=t}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(t){this._isCulling=t}isCulling(){return this._isCulling}setAnisotropy(t){this._anisortopy=t}getAnisotropy(){return this._anisortopy}getModel(){return this._model}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._model=null,this._modelColor=new ke,this._mvpMatrix4x4=new Ct,this._mvpMatrix4x4.loadIdentity()}}var Xt=(e=>(e[e.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",e[e.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",e[e.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",e))(Xt||{});class ke{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}}var Vn;(e=>{e.CubismBlendMode=Xt,e.CubismRenderer=ss,e.CubismTextureColor=ke})(Vn||(Vn={}));const kc=(e,t,i)=>{bo.print(e,"[CSM]"+t,i)},vi=(e,t,i)=>{kc(e,t+`
`,i)},At=e=>{console.assert(e)};let di,ie,si,se;di=(e,...t)=>{vi(Oe.LogLevel_Debug,"[D]"+e,t)},ie=(e,...t)=>{vi(Oe.LogLevel_Info,"[I]"+e,t)},si=(e,...t)=>{vi(Oe.LogLevel_Warning,"[W]"+e,t)},se=(e,...t)=>{vi(Oe.LogLevel_Error,"[E]"+e,t)};class bo{static print(t,i,s){if(t<it.getLoggingLevel())return;const r=it.coreLogFunction;if(!r)return;const n=i.replace(/\{(\d+)\}/g,(o,a)=>s[a]);r(n)}static dumpBytes(t,i,s){for(let r=0;r<s;r++)r%16==0&&r>0?this.print(t,`
`):r%8==0&&r>0&&this.print(t,"  "),this.print(t,"{0} ",[i[r]&255]);this.print(t,`
`)}constructor(){}}var wn;(e=>{e.CubismDebug=bo})(wn||(wn={}));class Bo{constructor(t,i){this.first=t==null?null:t,this.second=i==null?null:i}}const Js=class{constructor(e){e!=null?e<1?(this._keyValues=[],this._dummyValue=null,this._size=0):(this._keyValues=new Array(e),this._size=e):(this._keyValues=[],this._dummyValue=null,this._size=0)}release(){this.clear()}appendKey(e){this.prepareCapacity(this._size+1,!1),this._keyValues[this._size]=new Bo(e),this._size+=1}getValue(e){let t=-1;for(let i=0;i<this._size;i++)if(this._keyValues[i].first==e){t=i;break}return t>=0?this._keyValues[t].second:(this.appendKey(e),this._keyValues[this._size-1].second)}setValue(e,t){let i=-1;for(let s=0;s<this._size;s++)if(this._keyValues[s].first==e){i=s;break}i>=0?this._keyValues[i].second=t:(this.appendKey(e),this._keyValues[this._size-1].second=t)}isExist(e){for(let t=0;t<this._size;t++)if(this._keyValues[t].first==e)return!0;return!1}clear(){this._keyValues=void 0,this._keyValues=null,this._keyValues=[],this._size=0}getSize(){return this._size}prepareCapacity(e,t){e>this._keyValues.length&&(this._keyValues.length==0?(!t&&e<Js.DefaultSize&&(e=Js.DefaultSize),this._keyValues.length=e):(!t&&e<this._keyValues.length*2&&(e=this._keyValues.length*2),this._keyValues.length=e))}begin(){return new Be(this,0)}end(){return new Be(this,this._size)}erase(e){const t=e._index;return t<0||this._size<=t?e:(this._keyValues.splice(t,1),--this._size,new Be(this,t))}dumpAsInt(){for(let e=0;e<this._size;e++)di("{0} ,",this._keyValues[e]),di(`
`)}};let jt=Js;jt.DefaultSize=10;class Be{constructor(t,i){this._map=t!=null?t:new jt,this._index=i!=null?i:0}set(t){return this._index=t._index,this._map=t._map,this}preIncrement(){return++this._index,this}preDecrement(){return--this._index,this}increment(){return new Be(this._map,this._index++)}decrement(){const t=new Be(this._map,this._index);return this._map=t._map,this._index=t._index,this}ptr(){return this._map._keyValues[this._index]}notEqual(t){return this._index!=t._index||this._map!=t._map}}var Tn;(e=>{e.csmMap=jt,e.csmPair=Bo,e.iterator=Be})(Tn||(Tn={}));const Hi="Error: type mismatch",Oc="Error: index out of bounds";class q{constructor(){}getRawString(t,i){return this.getString(t,i)}toInt(t=0){return t}toFloat(t=0){return t}toBoolean(t=!1){return t}getSize(){return 0}getArray(t=null){return t}getVector(t=new j){return t}getMap(t){return t}getValueByIndex(t){return q.errorValue.setErrorNotForClientCall(Hi)}getValueByString(t){return q.nullValue.setErrorNotForClientCall(Hi)}getKeys(){return q.s_dummyKeys}isError(){return!1}isNull(){return!1}isBool(){return!1}isFloat(){return!1}isString(){return!1}isArray(){return!1}isMap(){return!1}equals(t){return!1}isStatic(){return!1}setErrorNotForClientCall(t){return fi.errorValue}static staticInitializeNotForClientCall(){Ut.trueValue=new Ut(!0),Ut.falseValue=new Ut(!1),q.errorValue=new fi("ERROR",!0),q.nullValue=new Or,q.s_dummyKeys=new j}static staticReleaseNotForClientCall(){Ut.trueValue=null,Ut.falseValue=null,q.errorValue=null,q.nullValue=null,q.s_dummyKeys=null}}class lt{constructor(t,i){this._error=null,this._lineCount=0,this._root=null,t!=null&&this.parseBytes(t,i)}static create(t,i){const s=new lt;return s.parseBytes(t,i)?s:(lt.delete(s),null)}static delete(t){}getRoot(){return this._root}arrayBufferToString(t){const i=new Uint8Array(t);let s="";for(let r=0,n=i.length;r<n;++r)s+="%"+this.pad(i[r].toString(16));return s=decodeURIComponent(s),s}pad(t){return t.length<2?"0"+t:t}parseBytes(t,i){const s=new Array(1),r=this.arrayBufferToString(t);if(this._root=this.parseValue(r,i,0,s),this._error){let n="\0";return n="Json parse error : @line "+(this._lineCount+1)+`
`,this._root=new $i(n),ie("{0}",this._root.getRawString()),!1}else if(this._root==null)return this._root=new fi(new vt(this._error),!1),!1;return!0}getParseError(){return this._error}checkEndOfFile(){return this._root.getArray()[1].equals("EOF")}parseValue(t,i,s,r){if(this._error)return null;let n=null,o=s,a;for(;o<i;o++)switch(t[o]){case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{const u=new Array(1);return a=Nc(t.slice(o),u),r[0]=t.indexOf(u[0]),new Mo(a)}case'"':return new $i(this.parseString(t,i,o+1,r));case"[":return n=this.parseArray(t,i,o+1,r),n;case"{":return n=this.parseObject(t,i,o+1,r),n;case"n":return o+3<i?(n=new Or,r[0]=o+4):this._error="parse null",n;case"t":return o+3<i?(n=Ut.trueValue,r[0]=o+4):this._error="parse true",n;case"f":return o+4<i?(n=Ut.falseValue,r[0]=o+5):this._error="illegal ',' position",n;case",":return this._error="illegal ',' position",null;case"]":return r[0]=o,null;case`
`:this._lineCount++}return this._error="illegal end of value",null}parseString(t,i,s,r){if(this._error)return null;let n=s,o,a;const l=new vt("");let u=s;for(;n<i;n++)switch(o=t[n],o){case'"':return r[0]=n+1,l.append(t.slice(u),n-u),l.s;case"//":if(n++,n-1>u&&l.append(t.slice(u),n-u),u=n+1,n<i)switch(a=t[n],a){case"\\":l.expansion(1,"\\");break;case'"':l.expansion(1,'"');break;case"/":l.expansion(1,"/");break;case"b":l.expansion(1,"\b");break;case"f":l.expansion(1,"\f");break;case"n":l.expansion(1,`
`);break;case"r":l.expansion(1,"\r");break;case"t":l.expansion(1,"	");break;case"u":this._error="parse string/unicord escape not supported";break}else this._error="parse string/escape error"}return this._error="parse string/illegal end",null}parseObject(t,i,s,r){if(this._error)return null;const n=new vo;let o="",a=s,l="";const u=Array(1);let h=!1;for(;a<i;a++){t:for(;a<i;a++)switch(l=t[a],l){case'"':if(o=this.parseString(t,i,a+1,u),this._error)return null;a=u[0],h=!0;break t;case"}":return r[0]=a+1,n;case":":this._error="illegal ':' position";break;case`
`:this._lineCount++}if(!h)return this._error="key not found",null;h=!1;t:for(;a<i;a++)switch(l=t[a],l){case":":h=!0,a++;break t;case"}":this._error="illegal '}' position";break;case`
`:this._lineCount++}if(!h)return this._error="':' not found",null;const d=this.parseValue(t,i,a,u);if(this._error)return null;a=u[0],n.put(o,d);t:for(;a<i;a++)switch(l=t[a],l){case",":break t;case"}":return r[0]=a+1,n;case`
`:this._lineCount++}}return this._error="illegal end of perseObject",null}parseArray(t,i,s,r){if(this._error)return null;let n=new Io,o=s,a;const l=new Array(1);for(;o<i;o++){const u=this.parseValue(t,i,o,l);if(this._error)return null;o=l[0],u&&n.add(u);t:for(;o<i;o++)switch(a=t[o],a){case",":break t;case"]":return r[0]=o+1,n;case`
`:++this._lineCount}}return n=void 0,this._error="illegal end of parseObject",null}}class Mo extends q{constructor(t){super(),this._value=t}isFloat(){return!0}getString(t,i){const s="\0";return this._value=parseFloat(s),this._stringBuffer=s,this._stringBuffer}toInt(t=0){return parseInt(this._value.toString())}toFloat(t=0){return this._value}equals(t){return typeof t=="number"?Math.round(t)?!1:t==this._value:!1}}class Ut extends q{constructor(t){super(),this._boolValue=t}isBool(){return!0}toBoolean(t=!1){return this._boolValue}getString(t,i){return this._stringBuffer=this._boolValue?"true":"false",this._stringBuffer}equals(t){return typeof t=="boolean"?t==this._boolValue:!1}isStatic(){return!0}}class $i extends q{constructor(t){super(),typeof t=="string"&&(this._stringBuffer=t),t instanceof vt&&(this._stringBuffer=t.s)}isString(){return!0}getString(t,i){return this._stringBuffer}equals(t){return typeof t=="string"?this._stringBuffer==t:t instanceof vt?this._stringBuffer==t.s:!1}}class fi extends $i{constructor(t,i){var s=(...r)=>{super(...r)};s(t),this._isStatic=i}isStatic(){return this._isStatic}setErrorNotForClientCall(t){return this._stringBuffer=t,this}isError(){return!0}}class Or extends q{isNull(){return!0}getString(t,i){return this._stringBuffer}isStatic(){return!0}setErrorNotForClientCall(t){return this._stringBuffer=t,fi.nullValue}constructor(){super(),this._stringBuffer="NullValue"}}class Io extends q{constructor(){super(),this._array=new j}release(){for(let t=this._array.begin();t.notEqual(this._array.end());t.preIncrement()){let i=t.ptr();i&&!i.isStatic()&&(i=void 0,i=null)}}isArray(){return!0}getValueByIndex(t){if(t<0||this._array.getSize()<=t)return q.errorValue.setErrorNotForClientCall(Oc);const i=this._array.at(t);return i==null?q.nullValue:i}getValueByString(t){return q.errorValue.setErrorNotForClientCall(Hi)}getString(t,i){const s=i+`[
`;for(let r=this._array.begin();r.notEqual(this._array.end());r.increment()){const n=r.ptr();this._stringBuffer+=i+""+n.getString(i+" ")+`
`}return this._stringBuffer=s+i+`]
`,this._stringBuffer}add(t){this._array.pushBack(t)}getVector(t=null){return this._array}getSize(){return this._array.getSize()}}class vo extends q{constructor(){super(),this._map=new jt}release(){const t=this._map.begin();for(;t.notEqual(this._map.end());){let i=t.ptr().second;i&&!i.isStatic()&&(i=void 0,i=null),t.preIncrement()}}isMap(){return!0}getValueByString(t){if(t instanceof vt){const i=this._map.getValue(t.s);return i==null?q.nullValue:i}for(let i=this._map.begin();i.notEqual(this._map.end());i.preIncrement())if(i.ptr().first==t)return i.ptr().second==null?q.nullValue:i.ptr().second;return q.nullValue}getValueByIndex(t){return q.errorValue.setErrorNotForClientCall(Hi)}getString(t,i){this._stringBuffer=i+`{
`;const s=this._map.begin();for(;s.notEqual(this._map.end());){const r=s.ptr().first,n=s.ptr().second;this._stringBuffer+=i+" "+r+" : "+n.getString(i+"   ")+` 
`,s.preIncrement()}return this._stringBuffer+=i+`}
`,this._stringBuffer}getMap(t){return this._map}put(t,i){this._map.setValue(t,i)}getKeys(){if(!this._keys){this._keys=new j;const t=this._map.begin();for(;t.notEqual(this._map.end());){const i=t.ptr().first;this._keys.pushBack(i),t.preIncrement()}}return this._keys}getSize(){return this._keys.getSize()}}var En;(e=>{e.CubismJson=lt,e.JsonArray=Io,e.JsonBoolean=Ut,e.JsonError=fi,e.JsonFloat=Mo,e.JsonMap=vo,e.JsonNullvalue=Or,e.JsonString=$i,e.Value=q})(En||(En={}));function Nc(e,t){let i=0;for(let r=1;;r++){const n=e.slice(r-1,r);if(n=="e"||n=="-"||n=="E")continue;const o=e.substring(0,r),a=Number(o);if(isNaN(a))break;i=r}let s=parseFloat(e);return isNaN(s)&&(s=NaN),t[0]=e.slice(i),s}let Vt=!1,Te=!1,Ee=null,Ze=null;const re=Object.freeze({vertexOffset:0,vertexStep:2});function Uc(e){!e||(e=void 0)}class it{static startUp(t=null){if(Vt)return ie("CubismFramework.startUp() is already done."),Vt;if(Ee=t,Ee!=null&&Live2DCubismCore.Logging.csmSetLogFunction(Ee.logFunction),Vt=!0,Vt){const i=Live2DCubismCore.Version.csmGetVersion(),s=(i&4278190080)>>24,r=(i&16711680)>>16,n=i&65535,o=i;ie("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+s).slice(-2),("00"+r).slice(-2),("0000"+n).slice(-4),o)}return ie("CubismFramework.startUp() is complete."),Vt}static cleanUp(){Vt=!1,Te=!1,Ee=null,Ze=null}static initialize(){if(At(Vt),!Vt){si("CubismFramework is not started.");return}if(Te){si("CubismFramework.initialize() skipped, already initialized.");return}q.staticInitializeNotForClientCall(),Ze=new Co,Te=!0,ie("CubismFramework.initialize() is complete.")}static dispose(){if(At(Vt),!Vt){si("CubismFramework is not started.");return}if(!Te){si("CubismFramework.dispose() skipped, not initialized.");return}q.staticReleaseNotForClientCall(),Ze.release(),Ze=null,ss.staticRelease(),Te=!1,ie("CubismFramework.dispose() is complete.")}static isStarted(){return Vt}static isInitialized(){return Te}static coreLogFunction(t){!Live2DCubismCore.Logging.csmGetLogFunction()||Live2DCubismCore.Logging.csmGetLogFunction()(t)}static getLoggingLevel(){return Ee!=null?Ee.loggingLevel:Oe.LogLevel_Off}static getIdManager(){return Ze}constructor(){}}var Oe=(e=>(e[e.LogLevel_Verbose=0]="LogLevel_Verbose",e[e.LogLevel_Debug=1]="LogLevel_Debug",e[e.LogLevel_Info=2]="LogLevel_Info",e[e.LogLevel_Warning=3]="LogLevel_Warning",e[e.LogLevel_Error=4]="LogLevel_Error",e[e.LogLevel_Off=5]="LogLevel_Off",e))(Oe||{}),Fn;(e=>{e.Constant=re,e.csmDelete=Uc,e.CubismFramework=it})(Fn||(Fn={}));class Po{}var Zs;(e=>{e.ICubismModelSetting=Po})(Zs||(Zs={}));const qt="FileReferences",zc="Groups",jc="Layout",Xc="HitAreas",Yc="Moc",Hc="Textures",$c="Physics",Wc="Pose",qc="Expressions",Gc="Motions",Rn="UserData",Gt="Name",Ln="File",Kc="Id",Pi="Ids",An="Sound",Dn="FadeInTime",kn="FadeOutTime",Cs="LipSync",bs="EyeBlink";class Jc extends Po{constructor(t,i){super(),this._json=lt.create(t,i),this._json&&(this._jsonValue=new j,this._jsonValue.pushBack(this._json.getRoot().getValueByString(zc)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(qt).getValueByString(Yc)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(qt).getValueByString(Gc)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(qt).getValueByString(qc)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(qt).getValueByString(Hc)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(qt).getValueByString($c)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(qt).getValueByString(Wc)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(Xc)))}release(){lt.delete(this._json),this._jsonValue=null}GetJson(){return this._json}getModelFileName(){return this.isExistModelFile()?this._jsonValue.at(1).getRawString():""}getTextureCount(){return this.isExistTextureFiles()?this._jsonValue.at(4).getSize():0}getTextureDirectory(){return this._jsonValue.at(4).getRawString()}getTextureFileName(t){return this._jsonValue.at(4).getValueByIndex(t).getRawString()}getHitAreasCount(){return this.isExistHitAreas()?this._jsonValue.at(7).getSize():0}getHitAreaId(t){return it.getIdManager().getId(this._jsonValue.at(7).getValueByIndex(t).getValueByString(Kc).getRawString())}getHitAreaName(t){return this._jsonValue.at(7).getValueByIndex(t).getValueByString(Gt).getRawString()}getPhysicsFileName(){return this.isExistPhysicsFile()?this._jsonValue.at(5).getRawString():""}getPoseFileName(){return this.isExistPoseFile()?this._jsonValue.at(6).getRawString():""}getExpressionCount(){return this.isExistExpressionFile()?this._jsonValue.at(3).getSize():0}getExpressionName(t){return this._jsonValue.at(3).getValueByIndex(t).getValueByString(Gt).getRawString()}getExpressionFileName(t){return this._jsonValue.at(3).getValueByIndex(t).getValueByString(Ln).getRawString()}getMotionGroupCount(){return this.isExistMotionGroups()?this._jsonValue.at(2).getKeys().getSize():0}getMotionGroupName(t){return this.isExistMotionGroups()?this._jsonValue.at(2).getKeys().at(t):null}getMotionCount(t){return this.isExistMotionGroupName(t)?this._jsonValue.at(2).getValueByString(t).getSize():0}getMotionFileName(t,i){return this.isExistMotionGroupName(t)?this._jsonValue.at(2).getValueByString(t).getValueByIndex(i).getValueByString(Ln).getRawString():""}getMotionSoundFileName(t,i){return this.isExistMotionSoundFile(t,i)?this._jsonValue.at(2).getValueByString(t).getValueByIndex(i).getValueByString(An).getRawString():""}getMotionFadeInTimeValue(t,i){return this.isExistMotionFadeIn(t,i)?this._jsonValue.at(2).getValueByString(t).getValueByIndex(i).getValueByString(Dn).toFloat():-1}getMotionFadeOutTimeValue(t,i){return this.isExistMotionFadeOut(t,i)?this._jsonValue.at(2).getValueByString(t).getValueByIndex(i).getValueByString(kn).toFloat():-1}getUserDataFile(){return this.isExistUserDataFile()?this._json.getRoot().getValueByString(qt).getValueByString(Rn).getRawString():""}getLayoutMap(t){const i=this._json.getRoot().getValueByString(jc).getMap();if(i==null)return!1;let s=!1;for(const r=i.begin();r.notEqual(i.end());r.preIncrement())t.setValue(r.ptr().first,r.ptr().second.toFloat()),s=!0;return s}getEyeBlinkParameterCount(){if(!this.isExistEyeBlinkParameters())return 0;let t=0;for(let i=0;i<this._jsonValue.at(0).getSize();i++){const s=this._jsonValue.at(0).getValueByIndex(i);if(!(s.isNull()||s.isError())&&s.getValueByString(Gt).getRawString()==bs){t=s.getValueByString(Pi).getVector().getSize();break}}return t}getEyeBlinkParameterId(t){if(!this.isExistEyeBlinkParameters())return null;for(let i=0;i<this._jsonValue.at(0).getSize();i++){const s=this._jsonValue.at(0).getValueByIndex(i);if(!(s.isNull()||s.isError())&&s.getValueByString(Gt).getRawString()==bs)return it.getIdManager().getId(s.getValueByString(Pi).getValueByIndex(t).getRawString())}return null}getLipSyncParameterCount(){if(!this.isExistLipSyncParameters())return 0;let t=0;for(let i=0;i<this._jsonValue.at(0).getSize();i++){const s=this._jsonValue.at(0).getValueByIndex(i);if(!(s.isNull()||s.isError())&&s.getValueByString(Gt).getRawString()==Cs){t=s.getValueByString(Pi).getVector().getSize();break}}return t}getLipSyncParameterId(t){if(!this.isExistLipSyncParameters())return null;for(let i=0;i<this._jsonValue.at(0).getSize();i++){const s=this._jsonValue.at(0).getValueByIndex(i);if(!(s.isNull()||s.isError())&&s.getValueByString(Gt).getRawString()==Cs)return it.getIdManager().getId(s.getValueByString(Pi).getValueByIndex(t).getRawString())}return null}isExistModelFile(){const t=this._jsonValue.at(1);return!t.isNull()&&!t.isError()}isExistTextureFiles(){const t=this._jsonValue.at(4);return!t.isNull()&&!t.isError()}isExistHitAreas(){const t=this._jsonValue.at(7);return!t.isNull()&&!t.isError()}isExistPhysicsFile(){const t=this._jsonValue.at(5);return!t.isNull()&&!t.isError()}isExistPoseFile(){const t=this._jsonValue.at(6);return!t.isNull()&&!t.isError()}isExistExpressionFile(){const t=this._jsonValue.at(3);return!t.isNull()&&!t.isError()}isExistMotionGroups(){const t=this._jsonValue.at(2);return!t.isNull()&&!t.isError()}isExistMotionGroupName(t){const i=this._jsonValue.at(2).getValueByString(t);return!i.isNull()&&!i.isError()}isExistMotionSoundFile(t,i){const s=this._jsonValue.at(2).getValueByString(t).getValueByIndex(i).getValueByString(An);return!s.isNull()&&!s.isError()}isExistMotionFadeIn(t,i){const s=this._jsonValue.at(2).getValueByString(t).getValueByIndex(i).getValueByString(Dn);return!s.isNull()&&!s.isError()}isExistMotionFadeOut(t,i){const s=this._jsonValue.at(2).getValueByString(t).getValueByIndex(i).getValueByString(kn);return!s.isNull()&&!s.isError()}isExistUserDataFile(){const t=this._json.getRoot().getValueByString(qt).getValueByString(Rn);return!t.isNull()&&!t.isError()}isExistEyeBlinkParameters(){if(this._jsonValue.at(0).isNull()||this._jsonValue.at(0).isError())return!1;for(let t=0;t<this._jsonValue.at(0).getSize();++t)if(this._jsonValue.at(0).getValueByIndex(t).getValueByString(Gt).getRawString()==bs)return!0;return!1}isExistLipSyncParameters(){if(this._jsonValue.at(0).isNull()||this._jsonValue.at(0).isError())return!1;for(let t=0;t<this._jsonValue.at(0).getSize();++t)if(this._jsonValue.at(0).getValueByIndex(t).getValueByString(Gt).getRawString()==Cs)return!0;return!1}}var Qs;(e=>{e.CubismModelSettingJson=Jc})(Qs||(Qs={}));class rs{static create(){return new rs}static delete(t){}setParameters(t){this._breathParameters=t}getParameters(){return this._breathParameters}updateParameters(t,i){this._currentTime+=i;const s=this._currentTime*2*3.14159;for(let r=0;r<this._breathParameters.getSize();++r){const n=this._breathParameters.at(r);t.addParameterValueById(n.parameterId,n.offset+n.peak*Math.sin(s/n.cycle),n.weight)}}constructor(){this._currentTime=0}}class Zc{constructor(t,i,s,r,n){this.parameterId=t==null?null:t,this.offset=i==null?0:i,this.peak=s==null?0:s,this.cycle=r==null?0:r,this.weight=n==null?0:n}}var On;(e=>{e.BreathParameterData=Zc,e.CubismBreath=rs})(On||(On={}));const tr=class{static create(e=null){return new tr(e)}static delete(e){}setBlinkingInterval(e){this._blinkingIntervalSeconds=e}setBlinkingSetting(e,t,i){this._closingSeconds=e,this._closedSeconds=t,this._openingSeconds=i}setParameterIds(e){this._parameterIds=e}getParameterIds(){return this._parameterIds}updateParameters(e,t){this._userTimeSeconds+=t;let i,s=0;switch(this._blinkingState){case xt.EyeState_Closing:s=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,s>=1&&(s=1,this._blinkingState=xt.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),i=1-s;break;case xt.EyeState_Closed:s=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,s>=1&&(this._blinkingState=xt.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),i=0;break;case xt.EyeState_Opening:s=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,s>=1&&(s=1,this._blinkingState=xt.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),i=s;break;case xt.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=xt.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),i=1;break;case xt.EyeState_First:default:this._blinkingState=xt.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),i=1;break}tr.CloseIfZero||(i=-i);for(let r=0;r<this._parameterIds.getSize();++r)e.setParameterValueById(this._parameterIds.at(r),i)}constructor(e){if(this._blinkingState=xt.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=new j,e!=null)for(let t=0;t<e.getEyeBlinkParameterCount();++t)this._parameterIds.pushBack(e.getEyeBlinkParameterId(t))}determinNextBlinkingTiming(){const e=Math.random();return this._userTimeSeconds+e*(2*this._blinkingIntervalSeconds-1)}};let Nr=tr;Nr.CloseIfZero=!0;var xt=(e=>(e[e.EyeState_First=0]="EyeState_First",e[e.EyeState_Interval=1]="EyeState_Interval",e[e.EyeState_Closing=2]="EyeState_Closing",e[e.EyeState_Closed=3]="EyeState_Closed",e[e.EyeState_Opening=4]="EyeState_Opening",e))(xt||{}),er;(e=>{e.CubismEyeBlink=Nr,e.EyeState=xt})(er||(er={}));const Qc=.001,Bs=.5,Nn="FadeInTime",Un="Link",th="Groups",eh="Id";class _i{static create(t,i){const s=new _i,r=lt.create(t,i),n=r.getRoot();n.getValueByString(Nn).isNull()||(s._fadeTimeSeconds=n.getValueByString(Nn).toFloat(Bs),s._fadeTimeSeconds<=0&&(s._fadeTimeSeconds=Bs));const o=n.getValueByString(th),a=o.getSize();for(let l=0;l<a;++l){const u=o.getValueByIndex(l),h=u.getSize();let d=0;for(let f=0;f<h;++f){const _=u.getValueByIndex(f),m=new pi,B=it.getIdManager().getId(_.getValueByString(eh).getRawString());if(m.partId=B,!_.getValueByString(Un).isNull()){const y=_.getValueByString(Un),x=y.getSize();for(let V=0;V<x;++V){const T=new pi,I=it.getIdManager().getId(y.getValueByIndex(V).getString());T.partId=I,m.link.pushBack(T)}}s._partGroups.pushBack(m.clone()),++d}s._partGroupCounts.pushBack(d)}return lt.delete(r),s}static delete(t){}updateParameters(t,i){t!=this._lastModel&&this.reset(t),this._lastModel=t,i<0&&(i=0);let s=0;for(let r=0;r<this._partGroupCounts.getSize();r++){const n=this._partGroupCounts.at(r);this.doFade(t,i,s,n),s+=n}this.copyPartOpacities(t)}reset(t){let i=0;for(let s=0;s<this._partGroupCounts.getSize();++s){const r=this._partGroupCounts.at(s);for(let n=i;n<i+r;++n){this._partGroups.at(n).initialize(t);const o=this._partGroups.at(n).partIndex,a=this._partGroups.at(n).parameterIndex;if(!(o<0)){t.setPartOpacityByIndex(o,n==i?1:0),t.setParameterValueByIndex(a,n==i?1:0);for(let l=0;l<this._partGroups.at(n).link.getSize();++l)this._partGroups.at(n).link.at(l).initialize(t)}}i+=r}}copyPartOpacities(t){for(let i=0;i<this._partGroups.getSize();++i){const s=this._partGroups.at(i);if(s.link.getSize()==0)continue;const r=this._partGroups.at(i).partIndex,n=t.getPartOpacityByIndex(r);for(let o=0;o<s.link.getSize();++o){const l=s.link.at(o).partIndex;l<0||t.setPartOpacityByIndex(l,n)}}}doFade(t,i,s,r){let n=-1,o=1;const a=.5,l=.15;for(let u=s;u<s+r;++u){const h=this._partGroups.at(u).partIndex,d=this._partGroups.at(u).parameterIndex;if(t.getParameterValueByIndex(d)>Qc){if(n>=0)break;n=u,o=t.getPartOpacityByIndex(h),o+=i/this._fadeTimeSeconds,o>1&&(o=1)}}n<0&&(n=0,o=1);for(let u=s;u<s+r;++u){const h=this._partGroups.at(u).partIndex;if(n==u)t.setPartOpacityByIndex(h,o);else{let d=t.getPartOpacityByIndex(h),f;o<a?f=o*(a-1)/a+1:f=(1-o)*a/(1-a),(1-f)*(1-o)>l&&(f=1-l/(1-o)),d>f&&(d=f),t.setPartOpacityByIndex(h,d)}}}constructor(){this._fadeTimeSeconds=Bs,this._lastModel=null,this._partGroups=new j,this._partGroupCounts=new j}}class pi{constructor(t){if(this.parameterIndex=0,this.partIndex=0,this.link=new j,t!=null){this.partId=t.partId;for(const i=t.link.begin();i.notEqual(t.link.end());i.preIncrement())this.link.pushBack(i.ptr().clone())}}assignment(t){this.partId=t.partId;for(const i=t.link.begin();i.notEqual(t.link.end());i.preIncrement())this.link.pushBack(i.ptr().clone());return this}initialize(t){this.parameterIndex=t.getParameterIndex(this.partId),this.partIndex=t.getPartIndex(this.partId),t.setParameterValueByIndex(this.parameterIndex,1)}clone(){const t=new pi;t.partId=this.partId,t.parameterIndex=this.parameterIndex,t.partIndex=this.partIndex,t.link=new j;for(let i=this.link.begin();i.notEqual(this.link.end());i.increment())t.link.pushBack(i.ptr().clone());return t}}var zn;(e=>{e.CubismPose=_i,e.PartData=pi})(zn||(zn={}));class Vo extends Ct{constructor(t,i){super(),this._width=t!==void 0?t:0,this._height=i!==void 0?i:0,this.setHeight(2)}setWidth(t){const i=t/this._width,s=i;this.scale(i,s)}setHeight(t){const i=t/this._height,s=i;this.scale(i,s)}setPosition(t,i){this.translate(t,i)}setCenterPosition(t,i){this.centerX(t),this.centerY(i)}top(t){this.setY(t)}bottom(t){const i=this._height*this.getScaleY();this.translateY(t-i)}left(t){this.setX(t)}right(t){const i=this._width*this.getScaleX();this.translateX(t-i)}centerX(t){const i=this._width*this.getScaleX();this.translateX(t-i/2)}setX(t){this.translateX(t)}centerY(t){const i=this._height*this.getScaleY();this.translateY(t-i/2)}setY(t){this.translateY(t)}setupFromLayout(t){const i="width",s="height",r="x",n="y",o="center_x",a="center_y",l="top",u="bottom",h="left",d="right";for(const f=t.begin();f.notEqual(t.end());f.preIncrement()){const _=f.ptr().first,m=f.ptr().second;_==i?this.setWidth(m):_==s&&this.setHeight(m)}for(const f=t.begin();f.notEqual(t.end());f.preIncrement()){const _=f.ptr().first,m=f.ptr().second;_==r?this.setX(m):_==n?this.setY(m):_==o?this.centerX(m):_==a?this.centerY(m):_==l?this.top(m):_==u?this.bottom(m):_==h?this.left(m):_==d&&this.right(m)}}}var jn;(e=>{e.CubismModelMatrix=Vo})(jn||(jn={}));class A{constructor(t,i){this.x=t,this.y=i,this.x=t==null?0:t,this.y=i==null?0:i}add(t){const i=new A(0,0);return i.x=this.x+t.x,i.y=this.y+t.y,i}substract(t){const i=new A(0,0);return i.x=this.x-t.x,i.y=this.y-t.y,i}multiply(t){const i=new A(0,0);return i.x=this.x*t.x,i.y=this.y*t.y,i}multiplyByScaler(t){return this.multiply(new A(t,t))}division(t){const i=new A(0,0);return i.x=this.x/t.x,i.y=this.y/t.y,i}divisionByScalar(t){return this.division(new A(t,t))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))}dot(t){return this.x*t.x+this.y*t.y}normalize(){const t=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/t,this.y=this.y/t}isEqual(t){return this.x==t.x&&this.y==t.y}isNotEqual(t){return!this.isEqual(t)}}var Xn;(e=>{e.CubismVector2=A})(Xn||(Xn={}));const Ai=class{static range(e,t,i){return e<t?e=t:e>i&&(e=i),e}static sin(e){return Math.sin(e)}static cos(e){return Math.cos(e)}static abs(e){return Math.abs(e)}static sqrt(e){return Math.sqrt(e)}static cbrt(e){if(e===0)return e;let t=e;const i=t<0;i&&(t=-t);let s;return t===1/0?s=1/0:(s=Math.exp(Math.log(t)/3),s=(t/(s*s)+2*s)/3),i?-s:s}static getEasingSine(e){return e<0?0:e>1?1:.5-.5*this.cos(e*Math.PI)}static max(e,t){return e>t?e:t}static min(e,t){return e>t?t:e}static degreesToRadian(e){return e/180*Math.PI}static radianToDegrees(e){return e*180/Math.PI}static directionToRadian(e,t){const i=Math.atan2(t.y,t.x),s=Math.atan2(e.y,e.x);let r=i-s;for(;r<-Math.PI;)r+=Math.PI*2;for(;r>Math.PI;)r-=Math.PI*2;return r}static directionToDegrees(e,t){const i=this.directionToRadian(e,t);let s=this.radianToDegrees(i);return t.x-e.x>0&&(s=-s),s}static radianToDirection(e){const t=new A;return t.x=this.sin(e),t.y=this.cos(e),t}static quadraticEquation(e,t,i){return this.abs(e)<Ai.Epsilon?this.abs(t)<Ai.Epsilon?-i:-i/t:-(t+this.sqrt(t*t-4*e*i))/(2*e)}static cardanoAlgorithmForBezier(e,t,i,s){if(this.sqrt(e)<Ai.Epsilon)return this.range(this.quadraticEquation(t,i,s),0,1);const r=t/e,n=i/e,o=s/e,a=(3*n-r*r)/3,l=a/3,u=(2*r*r*r-9*r*n+27*o)/27,h=u/2,d=h*h+l*l*l,f=.5,_=f+.01;if(d<0){const V=-a/3,T=V*V*V,I=this.sqrt(T),z=-u/(2*I),st=this.range(z,-1,1),k=Math.acos(st),tt=this.cbrt(I),L=2*tt,$=L*this.cos(k/3)-r/3;if(this.abs($-f)<_)return this.range($,0,1);const rt=L*this.cos((k+2*Math.PI)/3)-r/3;if(this.abs(rt-f)<_)return this.range(rt,0,1);const _t=L*this.cos((k+4*Math.PI)/3)-r/3;return this.range(_t,0,1)}if(d==0){let V;h<0?V=this.cbrt(-h):V=-this.cbrt(h);const T=2*V-r/3;if(this.abs(T-f)<_)return this.range(T,0,1);const I=-V-r/3;return this.range(I,0,1)}const m=this.sqrt(d),B=this.cbrt(m-h),y=this.cbrt(m+h),x=B-y-r/3;return this.range(x,0,1)}constructor(){}};let N=Ai;N.Epsilon=1e-5;var Yn;(e=>{e.CubismMath=N})(Yn||(Yn={}));const Ms=30,Hn=.01;class wo{constructor(){this._faceTargetX=0,this._faceTargetY=0,this._faceX=0,this._faceY=0,this._faceVX=0,this._faceVY=0,this._lastTimeSeconds=0,this._userTimeSeconds=0}update(t){this._userTimeSeconds+=t;const s=40/10*1/Ms;if(this._lastTimeSeconds==0){this._lastTimeSeconds=this._userTimeSeconds;return}const r=(this._userTimeSeconds-this._lastTimeSeconds)*Ms;this._lastTimeSeconds=this._userTimeSeconds;const o=.15*Ms,a=r*s/o,l=this._faceTargetX-this._faceX,u=this._faceTargetY-this._faceY;if(N.abs(l)<=Hn&&N.abs(u)<=Hn)return;const h=N.sqrt(l*l+u*u),d=s*l/h,f=s*u/h;let _=d-this._faceVX,m=f-this._faceVY;const B=N.sqrt(_*_+m*m);(B<-a||B>a)&&(_*=a/B,m*=a/B),this._faceVX+=_,this._faceVY+=m;{const y=.5*(N.sqrt(a*a+16*a*h-8*a*h)-a),x=N.sqrt(this._faceVX*this._faceVX+this._faceVY*this._faceVY);x>y&&(this._faceVX*=y/x,this._faceVY*=y/x)}this._faceX+=this._faceVX,this._faceY+=this._faceVY}getX(){return this._faceX}getY(){return this._faceY}set(t,i){this._faceTargetX=t,this._faceTargetY=i}}var $n;(e=>{e.CubismTargetPoint=wo})($n||($n={}));class ns{constructor(){this.setFinishedMotionHandler=t=>this._onFinishedMotion=t,this.getFinishedMotionHandler=()=>this._onFinishedMotion,this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=new j}static delete(t){t.release(),t=void 0,t=null}release(){this._weight=0}updateParameters(t,i,s){if(!i.isAvailable()||i.isFinished())return;if(!i.isStarted()){i.setIsStarted(!0),i.setStartTime(s-this._offsetSeconds),i.setFadeInStartTime(s);const a=this.getDuration();i.getEndTime()<0&&i.setEndTime(a<=0?-1:i.getStartTime()+a)}let r=this._weight;const n=this._fadeInSeconds==0?1:N.getEasingSine((s-i.getFadeInStartTime())/this._fadeInSeconds),o=this._fadeOutSeconds==0||i.getEndTime()<0?1:N.getEasingSine((i.getEndTime()-s)/this._fadeOutSeconds);r=r*n*o,i.setState(s,r),At(0<=r&&r<=1),this.doUpdateParameters(t,s,r,i),i.getEndTime()>0&&i.getEndTime()<s&&i.setIsFinished(!0)}setFadeInTime(t){this._fadeInSeconds=t}setFadeOutTime(t){this._fadeOutSeconds=t}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(t){this._weight=t}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(t){this._offsetSeconds=t}getFiredEvent(t,i){return this._firedEventValues}}var ir;(e=>{e.ACubismMotion=ns})(ir||(ir={}));const ih="FadeInTime",sh="FadeOutTime",Wn="Parameters",rh="Id",nh="Value",Vi="Blend",ah="Add",oh="Multiply",lh="Overwrite",qn=1;class as extends ns{constructor(){super(),this._parameters=new j}static create(t,i){const s=new as,r=lt.create(t,i),n=r.getRoot();s.setFadeInTime(n.getValueByString(ih).toFloat(qn)),s.setFadeOutTime(n.getValueByString(sh).toFloat(qn));const o=n.getValueByString(Wn).getSize();s._parameters.prepareCapacity(o);for(let a=0;a<o;++a){const l=n.getValueByString(Wn).getValueByIndex(a),u=it.getIdManager().getId(l.getValueByString(rh).getRawString()),h=l.getValueByString(nh).toFloat();let d;l.getValueByString(Vi).isNull()||l.getValueByString(Vi).getString()==ah?d=Nt.ExpressionBlendType_Add:l.getValueByString(Vi).getString()==oh?d=Nt.ExpressionBlendType_Multiply:l.getValueByString(Vi).getString()==lh?d=Nt.ExpressionBlendType_Overwrite:d=Nt.ExpressionBlendType_Add;const f=new To;f.parameterId=u,f.blendType=d,f.value=h,s._parameters.pushBack(f)}return lt.delete(r),s}doUpdateParameters(t,i,s,r){for(let n=0;n<this._parameters.getSize();++n){const o=this._parameters.at(n);switch(o.blendType){case Nt.ExpressionBlendType_Add:{t.addParameterValueById(o.parameterId,o.value,s);break}case Nt.ExpressionBlendType_Multiply:{t.multiplyParameterValueById(o.parameterId,o.value,s);break}case Nt.ExpressionBlendType_Overwrite:{t.setParameterValueById(o.parameterId,o.value,s);break}}}}}var Nt=(e=>(e[e.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",e[e.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",e[e.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite",e))(Nt||{});class To{}var sr;(e=>{e.CubismExpressionMotion=as,e.ExpressionBlendType=Nt,e.ExpressionParameter=To})(sr||(sr={}));var te=(e=>(e[e.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",e[e.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",e[e.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",e))(te||{}),wt=(e=>(e[e.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",e[e.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",e[e.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",e[e.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",e))(wt||{});class Ur{constructor(){this.time=0,this.value=0}}class Eo{constructor(){this.evaluate=null,this.basePointIndex=0,this.segmentType=0}}class Fo{constructor(){this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class Ro{constructor(){this.fireTime=0}}class Lo{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=new j,this.segments=new j,this.points=new j,this.events=new j}}var Gn;(e=>{e.CubismMotionCurve=Fo,e.CubismMotionCurveTarget=te,e.CubismMotionData=Lo,e.CubismMotionEvent=Ro,e.CubismMotionPoint=Ur,e.CubismMotionSegment=Eo,e.CubismMotionSegmentType=wt})(Gn||(Gn={}));const mt="Meta",uh="Duration",ch="Loop",hh="AreBeziersRestricted",gh="CurveCount",dh="Fps",fh="TotalSegmentCount",_h="TotalPointCount",Kt="Curves",ph="Target",mh="Id",wi="FadeInTime",Ti="FadeOutTime",Kn="Segments",Jn="UserData",yh="UserDataCount",xh="TotalUserDataSize",Sh="Time",Ch="Value";class Ao{constructor(t,i){this._json=lt.create(t,i)}release(){lt.delete(this._json)}getMotionDuration(){return this._json.getRoot().getValueByString(mt).getValueByString(uh).toFloat()}isMotionLoop(){return this._json.getRoot().getValueByString(mt).getValueByString(ch).toBoolean()}getEvaluationOptionFlag(t){return zr.EvaluationOptionFlag_AreBeziersRistricted==t?this._json.getRoot().getValueByString(mt).getValueByString(hh).toBoolean():!1}getMotionCurveCount(){return this._json.getRoot().getValueByString(mt).getValueByString(gh).toInt()}getMotionFps(){return this._json.getRoot().getValueByString(mt).getValueByString(dh).toFloat()}getMotionTotalSegmentCount(){return this._json.getRoot().getValueByString(mt).getValueByString(fh).toInt()}getMotionTotalPointCount(){return this._json.getRoot().getValueByString(mt).getValueByString(_h).toInt()}isExistMotionFadeInTime(){return!this._json.getRoot().getValueByString(mt).getValueByString(wi).isNull()}isExistMotionFadeOutTime(){return!this._json.getRoot().getValueByString(mt).getValueByString(Ti).isNull()}getMotionFadeInTime(){return this._json.getRoot().getValueByString(mt).getValueByString(wi).toFloat()}getMotionFadeOutTime(){return this._json.getRoot().getValueByString(mt).getValueByString(Ti).toFloat()}getMotionCurveTarget(t){return this._json.getRoot().getValueByString(Kt).getValueByIndex(t).getValueByString(ph).getRawString()}getMotionCurveId(t){return it.getIdManager().getId(this._json.getRoot().getValueByString(Kt).getValueByIndex(t).getValueByString(mh).getRawString())}isExistMotionCurveFadeInTime(t){return!this._json.getRoot().getValueByString(Kt).getValueByIndex(t).getValueByString(wi).isNull()}isExistMotionCurveFadeOutTime(t){return!this._json.getRoot().getValueByString(Kt).getValueByIndex(t).getValueByString(Ti).isNull()}getMotionCurveFadeInTime(t){return this._json.getRoot().getValueByString(Kt).getValueByIndex(t).getValueByString(wi).toFloat()}getMotionCurveFadeOutTime(t){return this._json.getRoot().getValueByString(Kt).getValueByIndex(t).getValueByString(Ti).toFloat()}getMotionCurveSegmentCount(t){return this._json.getRoot().getValueByString(Kt).getValueByIndex(t).getValueByString(Kn).getVector().getSize()}getMotionCurveSegment(t,i){return this._json.getRoot().getValueByString(Kt).getValueByIndex(t).getValueByString(Kn).getValueByIndex(i).toFloat()}getEventCount(){return this._json.getRoot().getValueByString(mt).getValueByString(yh).toInt()}getTotalEventValueSize(){return this._json.getRoot().getValueByString(mt).getValueByString(xh).toInt()}getEventTime(t){return this._json.getRoot().getValueByString(Jn).getValueByIndex(t).getValueByString(Sh).toFloat()}getEventValue(t){return new vt(this._json.getRoot().getValueByString(Jn).getValueByIndex(t).getValueByString(Ch).getRawString())}}var zr=(e=>(e[e.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",e))(zr||{}),Zn;(e=>{e.CubismMotionJson=Ao})(Zn||(Zn={}));const bh="EyeBlink",Bh="LipSync",Mh="Model",Ih="Parameter",vh="PartOpacity",Ph=!1;function Mt(e,t,i){const s=new Ur;return s.time=e.time+(t.time-e.time)*i,s.value=e.value+(t.value-e.value)*i,s}function Vh(e,t){let i=(t-e[0].time)/(e[1].time-e[0].time);return i<0&&(i=0),e[0].value+(e[1].value-e[0].value)*i}function wh(e,t){let i=(t-e[0].time)/(e[3].time-e[0].time);i<0&&(i=0);const s=Mt(e[0],e[1],i),r=Mt(e[1],e[2],i),n=Mt(e[2],e[3],i),o=Mt(s,r,i),a=Mt(r,n,i);return Mt(o,a,i).value}function Th(e,t){const i=t,s=e[0].time,r=e[3].time,n=e[1].time,o=e[2].time,a=r-3*o+3*n-s,l=3*o-6*n+3*s,u=3*n-3*s,h=s-i,d=N.cardanoAlgorithmForBezier(a,l,u,h),f=Mt(e[0],e[1],d),_=Mt(e[1],e[2],d),m=Mt(e[2],e[3],d),B=Mt(f,_,d),y=Mt(_,m,d);return Mt(B,y,d).value}function Eh(e,t){return e[0].value}function Fh(e,t){return e[1].value}function Is(e,t,i){const s=e.curves.at(t);let r=-1;const n=s.baseSegmentIndex+s.segmentCount;let o=0;for(let l=s.baseSegmentIndex;l<n;++l)if(o=e.segments.at(l).basePointIndex+(e.segments.at(l).segmentType==wt.CubismMotionSegmentType_Bezier?3:1),e.points.at(o).time>i){r=l;break}if(r==-1)return e.points.at(o).value;const a=e.segments.at(r);return a.evaluate(e.points.get(a.basePointIndex),i)}class os extends ns{constructor(){super(),this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0,this._motionData=null,this._modelCurveIdEyeBlink=null,this._modelCurveIdLipSync=null,this._eyeBlinkParameterIds=null,this._lipSyncParameterIds=null}static create(t,i,s){const r=new os;return r.parse(t,i),r._sourceFrameRate=r._motionData.fps,r._loopDurationSeconds=r._motionData.duration,r._onFinishedMotion=s,r}doUpdateParameters(t,i,s,r){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=it.getIdManager().getId(bh)),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=it.getIdManager().getId(Bh));let n=i-r.getStartTime();n<0&&(n=0);let o=Number.MAX_VALUE,a=Number.MAX_VALUE;const l=64;let u=0,h=0;this._eyeBlinkParameterIds.getSize()>l&&di("too many eye blink targets : {0}",this._eyeBlinkParameterIds.getSize()),this._lipSyncParameterIds.getSize()>l&&di("too many lip sync targets : {0}",this._lipSyncParameterIds.getSize());const d=this._fadeInSeconds<=0?1:N.getEasingSine((i-r.getFadeInStartTime())/this._fadeInSeconds),f=this._fadeOutSeconds<=0||r.getEndTime()<0?1:N.getEasingSine((r.getEndTime()-i)/this._fadeOutSeconds);let _,m,B,y=n;if(this._isLoop)for(;y>this._motionData.duration;)y-=this._motionData.duration;const x=this._motionData.curves;for(m=0;m<this._motionData.curveCount&&x.at(m).type==te.CubismMotionCurveTarget_Model;++m)_=Is(this._motionData,m,y),x.at(m).id==this._modelCurveIdEyeBlink?a=_:x.at(m).id==this._modelCurveIdLipSync&&(o=_);for(;m<this._motionData.curveCount&&x.at(m).type==te.CubismMotionCurveTarget_Parameter;++m){if(B=t.getParameterIndex(x.at(m).id),B==-1)continue;const V=t.getParameterValueByIndex(B);if(_=Is(this._motionData,m,y),a!=Number.MAX_VALUE){for(let I=0;I<this._eyeBlinkParameterIds.getSize()&&I<l;++I)if(this._eyeBlinkParameterIds.at(I)==x.at(m).id){_*=a,h|=1<<I;break}}if(o!=Number.MAX_VALUE){for(let I=0;I<this._lipSyncParameterIds.getSize()&&I<l;++I)if(this._lipSyncParameterIds.at(I)==x.at(m).id){_+=o,u|=1<<I;break}}let T;if(x.at(m).fadeInTime<0&&x.at(m).fadeOutTime<0)T=V+(_-V)*s;else{let I,z;x.at(m).fadeInTime<0?I=d:I=x.at(m).fadeInTime==0?1:N.getEasingSine((i-r.getFadeInStartTime())/x.at(m).fadeInTime),x.at(m).fadeOutTime<0?z=f:z=x.at(m).fadeOutTime==0||r.getEndTime()<0?1:N.getEasingSine((r.getEndTime()-i)/x.at(m).fadeOutTime);const st=this._weight*I*z;T=V+(_-V)*st}t.setParameterValueByIndex(B,T,1)}{if(a!=Number.MAX_VALUE)for(let V=0;V<this._eyeBlinkParameterIds.getSize()&&V<l;++V){const T=t.getParameterValueById(this._eyeBlinkParameterIds.at(V));if(h>>V&1)continue;const I=T+(a-T)*s;t.setParameterValueById(this._eyeBlinkParameterIds.at(V),I)}if(o!=Number.MAX_VALUE)for(let V=0;V<this._lipSyncParameterIds.getSize()&&V<l;++V){const T=t.getParameterValueById(this._lipSyncParameterIds.at(V));if(u>>V&1)continue;const I=T+(o-T)*s;t.setParameterValueById(this._lipSyncParameterIds.at(V),I)}}for(;m<this._motionData.curveCount&&x.at(m).type==te.CubismMotionCurveTarget_PartOpacity;++m)B=t.getParameterIndex(x.at(m).id),B!=-1&&(_=Is(this._motionData,m,y),t.setParameterValueByIndex(B,_));n>=this._motionData.duration&&(this._isLoop?(r.setStartTime(i),this._isLoopFadeIn&&r.setFadeInStartTime(i)):(this._onFinishedMotion&&this._onFinishedMotion(this),r.setIsFinished(!0))),this._lastWeight=s}setIsLoop(t){this._isLoop=t}isLoop(){return this._isLoop}setIsLoopFadeIn(t){this._isLoopFadeIn=t}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(t,i){const s=this._motionData.curves;for(let r=0;r<this._motionData.curveCount;++r)if(t==s.at(r).id){s.at(r).fadeInTime=i;return}}setParameterFadeOutTime(t,i){const s=this._motionData.curves;for(let r=0;r<this._motionData.curveCount;++r)if(t==s.at(r).id){s.at(r).fadeOutTime=i;return}}getParameterFadeInTime(t){const i=this._motionData.curves;for(let s=0;s<this._motionData.curveCount;++s)if(t==i.at(s).id)return i.at(s).fadeInTime;return-1}getParameterFadeOutTime(t){const i=this._motionData.curves;for(let s=0;s<this._motionData.curveCount;++s)if(t==i.at(s).id)return i.at(s).fadeOutTime;return-1}setEffectIds(t,i){this._eyeBlinkParameterIds=t,this._lipSyncParameterIds=i}release(){this._motionData=void 0,this._motionData=null}parse(t,i){this._motionData=new Lo;let s=new Ao(t,i);this._motionData.duration=s.getMotionDuration(),this._motionData.loop=s.isMotionLoop(),this._motionData.curveCount=s.getMotionCurveCount(),this._motionData.fps=s.getMotionFps(),this._motionData.eventCount=s.getEventCount();const r=s.getEvaluationOptionFlag(zr.EvaluationOptionFlag_AreBeziersRistricted);s.isExistMotionFadeInTime()?this._fadeInSeconds=s.getMotionFadeInTime()<0?1:s.getMotionFadeInTime():this._fadeInSeconds=1,s.isExistMotionFadeOutTime()?this._fadeOutSeconds=s.getMotionFadeOutTime()<0?1:s.getMotionFadeOutTime():this._fadeOutSeconds=1,this._motionData.curves.updateSize(this._motionData.curveCount,Fo,!0),this._motionData.segments.updateSize(s.getMotionTotalSegmentCount(),Eo,!0),this._motionData.points.updateSize(s.getMotionTotalPointCount(),Ur,!0),this._motionData.events.updateSize(this._motionData.eventCount,Ro,!0);let n=0,o=0;for(let a=0;a<this._motionData.curveCount;++a){s.getMotionCurveTarget(a)==Mh?this._motionData.curves.at(a).type=te.CubismMotionCurveTarget_Model:s.getMotionCurveTarget(a)==Ih?this._motionData.curves.at(a).type=te.CubismMotionCurveTarget_Parameter:s.getMotionCurveTarget(a)==vh&&(this._motionData.curves.at(a).type=te.CubismMotionCurveTarget_PartOpacity),this._motionData.curves.at(a).id=s.getMotionCurveId(a),this._motionData.curves.at(a).baseSegmentIndex=o,this._motionData.curves.at(a).fadeInTime=s.isExistMotionCurveFadeInTime(a)?s.getMotionCurveFadeInTime(a):-1,this._motionData.curves.at(a).fadeOutTime=s.isExistMotionCurveFadeOutTime(a)?s.getMotionCurveFadeOutTime(a):-1;for(let l=0;l<s.getMotionCurveSegmentCount(a);){switch(l==0?(this._motionData.segments.at(o).basePointIndex=n,this._motionData.points.at(n).time=s.getMotionCurveSegment(a,l),this._motionData.points.at(n).value=s.getMotionCurveSegment(a,l+1),n+=1,l+=2):this._motionData.segments.at(o).basePointIndex=n-1,s.getMotionCurveSegment(a,l)){case wt.CubismMotionSegmentType_Linear:{this._motionData.segments.at(o).segmentType=wt.CubismMotionSegmentType_Linear,this._motionData.segments.at(o).evaluate=Vh,this._motionData.points.at(n).time=s.getMotionCurveSegment(a,l+1),this._motionData.points.at(n).value=s.getMotionCurveSegment(a,l+2),n+=1,l+=3;break}case wt.CubismMotionSegmentType_Bezier:{this._motionData.segments.at(o).segmentType=wt.CubismMotionSegmentType_Bezier,r||Ph?this._motionData.segments.at(o).evaluate=wh:this._motionData.segments.at(o).evaluate=Th,this._motionData.points.at(n).time=s.getMotionCurveSegment(a,l+1),this._motionData.points.at(n).value=s.getMotionCurveSegment(a,l+2),this._motionData.points.at(n+1).time=s.getMotionCurveSegment(a,l+3),this._motionData.points.at(n+1).value=s.getMotionCurveSegment(a,l+4),this._motionData.points.at(n+2).time=s.getMotionCurveSegment(a,l+5),this._motionData.points.at(n+2).value=s.getMotionCurveSegment(a,l+6),n+=3,l+=7;break}case wt.CubismMotionSegmentType_Stepped:{this._motionData.segments.at(o).segmentType=wt.CubismMotionSegmentType_Stepped,this._motionData.segments.at(o).evaluate=Eh,this._motionData.points.at(n).time=s.getMotionCurveSegment(a,l+1),this._motionData.points.at(n).value=s.getMotionCurveSegment(a,l+2),n+=1,l+=3;break}case wt.CubismMotionSegmentType_InverseStepped:{this._motionData.segments.at(o).segmentType=wt.CubismMotionSegmentType_InverseStepped,this._motionData.segments.at(o).evaluate=Fh,this._motionData.points.at(n).time=s.getMotionCurveSegment(a,l+1),this._motionData.points.at(n).value=s.getMotionCurveSegment(a,l+2),n+=1,l+=3;break}default:{At(0);break}}++this._motionData.curves.at(a).segmentCount,++o}}for(let a=0;a<s.getEventCount();++a)this._motionData.events.at(a).fireTime=s.getEventTime(a),this._motionData.events.at(a).value=s.getEventValue(a);s.release(),s=void 0,s=null}getFiredEvent(t,i){this._firedEventValues.updateSize(0);for(let s=0;s<this._motionData.eventCount;++s)this._motionData.events.at(s).fireTime>t&&this._motionData.events.at(s).fireTime<=i&&this._firedEventValues.pushBack(new vt(this._motionData.events.at(s).value.s));return this._firedEventValues}}var rr;(e=>{e.CubismMotion=os})(rr||(rr={}));class Do{constructor(){this._autoDelete=!1,this._motion=null,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&ns.delete(this._motion)}setFadeOut(t){this._fadeOutSeconds=t,this._isTriggeredFadeOut=!0}startFadeOut(t,i){const s=i+t;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||s<this._endTimeSeconds)&&(this._endTimeSeconds=s)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(t){this._startTimeSeconds=t}setFadeInStartTime(t){this._fadeInStartTimeSeconds=t}setEndTime(t){this._endTimeSeconds=t}setIsFinished(t){this._finished=t}setIsStarted(t){this._started=t}isAvailable(){return this._available}setIsAvailable(t){this._available=t}setState(t,i){this._stateTimeSeconds=t,this._stateWeight=i}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(t){this._lastEventCheckSeconds=t}isTriggeredFadeOut(){return this._isTriggeredFadeOut&&this._endTimeSeconds<0}getFadeOutSeconds(){return this._fadeOutSeconds}}var Qn;(e=>{e.CubismMotionQueueEntry=Do})(Qn||(Qn={}));class ko{constructor(){this._userTimeSeconds=0,this._eventCallBack=null,this._eventCustomData=null,this._motions=new j}release(){for(let t=0;t<this._motions.getSize();++t)this._motions.at(t)&&(this._motions.at(t).release(),this._motions.set(t,void 0),this._motions.set(t,null));this._motions=null}startMotion(t,i,s){if(t==null)return Oo;let r=null;for(let n=0;n<this._motions.getSize();++n)r=this._motions.at(n),r!=null&&r.setFadeOut(r._motion.getFadeOutTime());return r=new Do,r._autoDelete=i,r._motion=t,this._motions.pushBack(r),r._motionQueueEntryHandle}isFinished(){for(let t=this._motions.begin();t.notEqual(this._motions.end());){let i=t.ptr();if(i==null){t=this._motions.erase(t);continue}if(i._motion==null){i.release(),i=void 0,i=null,t=this._motions.erase(t);continue}if(i.isFinished())t.preIncrement();else return!1}return!0}isFinishedByHandle(t){for(let i=this._motions.begin();i.notEqual(this._motions.end());i.increment()){const s=i.ptr();if(s!=null&&s._motionQueueEntryHandle==t&&!s.isFinished())return!1}return!0}stopAllMotions(){for(let t=this._motions.begin();t.notEqual(this._motions.end());){let i=t.ptr();if(i==null){t=this._motions.erase(t);continue}i.release(),i=void 0,i=null,t=this._motions.erase(t)}}getCubismMotionQueueEntry(t){for(let i=this._motions.begin();i.notEqual(this._motions.end());i.preIncrement()){const s=i.ptr();if(s!=null&&s._motionQueueEntryHandle==t)return s}return null}setEventCallback(t,i=null){this._eventCallBack=t,this._eventCustomData=i}doUpdateMotion(t,i){let s=!1;for(let r=this._motions.begin();r.notEqual(this._motions.end());){let n=r.ptr();if(n==null){r=this._motions.erase(r);continue}const o=n._motion;if(o==null){n.release(),n=void 0,n=null,r=this._motions.erase(r);continue}o.updateParameters(t,n,i),s=!0;const a=o.getFiredEvent(n.getLastCheckEventSeconds()-n.getStartTime(),i-n.getStartTime());for(let l=0;l<a.getSize();++l)this._eventCallBack(this,a.at(l),this._eventCustomData);n.setLastCheckEventSeconds(i),n.isFinished()?(n.release(),n=void 0,n=null,r=this._motions.erase(r)):(n.isTriggeredFadeOut()&&n.startFadeOut(n.getFadeOutSeconds(),i),r.preIncrement())}return s}}const Oo=-1;var ta;(e=>{e.CubismMotionQueueManager=ko,e.InvalidMotionQueueEntryHandleValue=Oo})(ta||(ta={}));class nr extends ko{constructor(){super(),this._currentPriority=0,this._reservePriority=0}getCurrentPriority(){return this._currentPriority}getReservePriority(){return this._reservePriority}setReservePriority(t){this._reservePriority=t}startMotionPriority(t,i,s){return s==this._reservePriority&&(this._reservePriority=0),this._currentPriority=s,super.startMotion(t,i,this._userTimeSeconds)}updateMotion(t,i){this._userTimeSeconds+=i;const s=super.doUpdateMotion(t,this._userTimeSeconds);return this.isFinished()&&(this._currentPriority=0),s}reserveMotion(t){return t<=this._reservePriority||t<=this._currentPriority?!1:(this._reservePriority=t,!0)}}var ar;(e=>{e.CubismMotionManager=nr})(ar||(ar={}));var Wi=(e=>(e[e.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",e))(Wi||{}),ee=(e=>(e[e.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",e[e.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",e[e.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",e))(ee||{});class Rh{constructor(){this.gravity=new A(0,0),this.wind=new A(0,0)}}class jr{}class or{}class No{constructor(){this.initialPosition=new A(0,0),this.position=new A(0,0),this.lastPosition=new A(0,0),this.lastGravity=new A(0,0),this.force=new A(0,0),this.velocity=new A(0,0)}}class Uo{constructor(){this.normalizationPosition=new or,this.normalizationAngle=new or}}class zo{constructor(){this.source=new jr}}class jo{constructor(){this.destination=new jr,this.translationScale=new A(0,0)}}class Xo{constructor(){this.settings=new j,this.inputs=new j,this.outputs=new j,this.particles=new j,this.gravity=new A(0,0),this.wind=new A(0,0)}}var ea;(e=>{e.CubismPhysicsInput=zo,e.CubismPhysicsNormalization=or,e.CubismPhysicsOutput=jo,e.CubismPhysicsParameter=jr,e.CubismPhysicsParticle=No,e.CubismPhysicsRig=Xo,e.CubismPhysicsSource=ee,e.CubismPhysicsSubRig=Uo,e.CubismPhysicsTargetType=Wi,e.PhysicsJsonEffectiveForces=Rh})(ea||(ea={}));const Qe="Position",vs="X",Ps="Y",Vs="Angle",ia="Type",sa="Id",Jt="Meta",Ei="EffectiveForces",Lh="TotalInputCount",Ah="TotalOutputCount",Dh="PhysicsSettingCount",ra="Gravity",na="Wind",kh="VertexCount",Z="PhysicsSettings",Fe="Normalization",aa="Minimum",oa="Maximum",la="Default",ua="Reflect",ca="Weight",ti="Input",Oh="Source",ce="Output",Nh="Scale",Uh="VertexIndex",zh="Destination",he="Vertices",jh="Mobility",Xh="Delay",Yh="Radius",Hh="Acceleration";class Yo{constructor(t,i){this._json=lt.create(t,i)}release(){lt.delete(this._json)}getGravity(){const t=new A(0,0);return t.x=this._json.getRoot().getValueByString(Jt).getValueByString(Ei).getValueByString(ra).getValueByString(vs).toFloat(),t.y=this._json.getRoot().getValueByString(Jt).getValueByString(Ei).getValueByString(ra).getValueByString(Ps).toFloat(),t}getWind(){const t=new A(0,0);return t.x=this._json.getRoot().getValueByString(Jt).getValueByString(Ei).getValueByString(na).getValueByString(vs).toFloat(),t.y=this._json.getRoot().getValueByString(Jt).getValueByString(Ei).getValueByString(na).getValueByString(Ps).toFloat(),t}getSubRigCount(){return this._json.getRoot().getValueByString(Jt).getValueByString(Dh).toInt()}getTotalInputCount(){return this._json.getRoot().getValueByString(Jt).getValueByString(Lh).toInt()}getTotalOutputCount(){return this._json.getRoot().getValueByString(Jt).getValueByString(Ah).toInt()}getVertexCount(){return this._json.getRoot().getValueByString(Jt).getValueByString(kh).toInt()}getNormalizationPositionMinimumValue(t){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(Fe).getValueByString(Qe).getValueByString(aa).toFloat()}getNormalizationPositionMaximumValue(t){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(Fe).getValueByString(Qe).getValueByString(oa).toFloat()}getNormalizationPositionDefaultValue(t){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(Fe).getValueByString(Qe).getValueByString(la).toFloat()}getNormalizationAngleMinimumValue(t){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(Fe).getValueByString(Vs).getValueByString(aa).toFloat()}getNormalizationAngleMaximumValue(t){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(Fe).getValueByString(Vs).getValueByString(oa).toFloat()}getNormalizationAngleDefaultValue(t){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(Fe).getValueByString(Vs).getValueByString(la).toFloat()}getInputCount(t){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(ti).getVector().getSize()}getInputWeight(t,i){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(ti).getValueByIndex(i).getValueByString(ca).toFloat()}getInputReflect(t,i){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(ti).getValueByIndex(i).getValueByString(ua).toBoolean()}getInputType(t,i){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(ti).getValueByIndex(i).getValueByString(ia).getRawString()}getInputSourceId(t,i){return it.getIdManager().getId(this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(ti).getValueByIndex(i).getValueByString(Oh).getValueByString(sa).getRawString())}getOutputCount(t){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(ce).getVector().getSize()}getOutputVertexIndex(t,i){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(ce).getValueByIndex(i).getValueByString(Uh).toInt()}getOutputAngleScale(t,i){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(ce).getValueByIndex(i).getValueByString(Nh).toFloat()}getOutputWeight(t,i){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(ce).getValueByIndex(i).getValueByString(ca).toFloat()}getOutputDestinationId(t,i){return it.getIdManager().getId(this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(ce).getValueByIndex(i).getValueByString(zh).getValueByString(sa).getRawString())}getOutputType(t,i){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(ce).getValueByIndex(i).getValueByString(ia).getRawString()}getOutputReflect(t,i){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(ce).getValueByIndex(i).getValueByString(ua).toBoolean()}getParticleCount(t){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(he).getVector().getSize()}getParticleMobility(t,i){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(he).getValueByIndex(i).getValueByString(jh).toFloat()}getParticleDelay(t,i){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(he).getValueByIndex(i).getValueByString(Xh).toFloat()}getParticleAcceleration(t,i){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(he).getValueByIndex(i).getValueByString(Hh).toFloat()}getParticleRadius(t,i){return this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(he).getValueByIndex(i).getValueByString(Yh).toFloat()}getParticlePosition(t,i){const s=new A(0,0);return s.x=this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(he).getValueByIndex(i).getValueByString(Qe).getValueByString(vs).toFloat(),s.y=this._json.getRoot().getValueByString(Z).getValueByIndex(t).getValueByString(he).getValueByIndex(i).getValueByString(Qe).getValueByString(Ps).toFloat(),s}}var ha;(e=>{e.CubismPhysicsJson=Yo})(ha||(ha={}));const ga="X",da="Y",fa="Angle",$h=5,Ho=100,Wh=.001;class mi{static create(t,i){const s=new mi;return s.parse(t,i),s._physicsRig.gravity.y=0,s}static delete(t){t!=null&&(t.release(),t=null)}evaluate(t,i){let s,r,n,o;const a=new A;let l,u,h,d,f,_,m,B;f=t.getModel().parameters.values,_=t.getModel().parameters.maximumValues,m=t.getModel().parameters.minimumValues,B=t.getModel().parameters.defaultValues;for(let y=0;y<this._physicsRig.subRigCount;++y){s={angle:0},a.x=0,a.y=0,l=this._physicsRig.settings.at(y),u=this._physicsRig.inputs.get(l.baseInputIndex),h=this._physicsRig.outputs.get(l.baseOutputIndex),d=this._physicsRig.particles.get(l.baseParticleIndex);for(let x=0;x<l.inputCount;++x)r=u[x].weight/Ho,u[x].sourceParameterIndex==-1&&(u[x].sourceParameterIndex=t.getParameterIndex(u[x].source.id)),u[x].getNormalizedParameterValue(a,s,f[u[x].sourceParameterIndex],m[u[x].sourceParameterIndex],_[u[x].sourceParameterIndex],B[u[x].sourceParameterIndex],l.normalizationPosition,l.normalizationAngle,u[x].reflect,r);n=N.degreesToRadian(-s.angle),a.x=a.x*N.cos(n)-a.y*N.sin(n),a.y=a.x*N.sin(n)+a.y*N.cos(n),ag(d,l.particleCount,a,s.angle,this._options.wind,Wh*l.normalizationPosition.maximum,i,$h);for(let x=0;x<l.outputCount;++x){const V=h[x].vertexIndex;if(V<1||V>=l.particleCount)break;h[x].destinationParameterIndex==-1&&(h[x].destinationParameterIndex=t.getParameterIndex(h[x].destination.id));const T=new A;T.x=d[V].position.x-d[V-1].position.x,T.y=d[V].position.y-d[V-1].position.y,o=h[x].getValue(T,d,V,h[x].reflect,this._options.gravity);const I=h[x].destinationParameterIndex,z=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(f.subarray(I))):f.slice(I);og(z,m[I],_[I],o,h[x]);for(let st=I,k=0;st<f.length;st++,k++)f[st]=z[k]}}}setOptions(t){this._options=t}getOption(){return this._options}constructor(){this._physicsRig=null,this._options=new $o,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}release(){this._physicsRig=void 0,this._physicsRig=null}parse(t,i){this._physicsRig=new Xo;let s=new Yo(t,i);this._physicsRig.gravity=s.getGravity(),this._physicsRig.wind=s.getWind(),this._physicsRig.subRigCount=s.getSubRigCount(),this._physicsRig.settings.updateSize(this._physicsRig.subRigCount,Uo,!0),this._physicsRig.inputs.updateSize(s.getTotalInputCount(),zo,!0),this._physicsRig.outputs.updateSize(s.getTotalOutputCount(),jo,!0),this._physicsRig.particles.updateSize(s.getVertexCount(),No,!0);let r=0,n=0,o=0;for(let a=0;a<this._physicsRig.settings.getSize();++a){this._physicsRig.settings.at(a).normalizationPosition.minimum=s.getNormalizationPositionMinimumValue(a),this._physicsRig.settings.at(a).normalizationPosition.maximum=s.getNormalizationPositionMaximumValue(a),this._physicsRig.settings.at(a).normalizationPosition.defalut=s.getNormalizationPositionDefaultValue(a),this._physicsRig.settings.at(a).normalizationAngle.minimum=s.getNormalizationAngleMinimumValue(a),this._physicsRig.settings.at(a).normalizationAngle.maximum=s.getNormalizationAngleMaximumValue(a),this._physicsRig.settings.at(a).normalizationAngle.defalut=s.getNormalizationAngleDefaultValue(a),this._physicsRig.settings.at(a).inputCount=s.getInputCount(a),this._physicsRig.settings.at(a).baseInputIndex=r;for(let l=0;l<this._physicsRig.settings.at(a).inputCount;++l)this._physicsRig.inputs.at(r+l).sourceParameterIndex=-1,this._physicsRig.inputs.at(r+l).weight=s.getInputWeight(a,l),this._physicsRig.inputs.at(r+l).reflect=s.getInputReflect(a,l),s.getInputType(a,l)==ga?(this._physicsRig.inputs.at(r+l).type=ee.CubismPhysicsSource_X,this._physicsRig.inputs.at(r+l).getNormalizedParameterValue=Gh):s.getInputType(a,l)==da?(this._physicsRig.inputs.at(r+l).type=ee.CubismPhysicsSource_Y,this._physicsRig.inputs.at(r+l).getNormalizedParameterValue=Kh):s.getInputType(a,l)==fa&&(this._physicsRig.inputs.at(r+l).type=ee.CubismPhysicsSource_Angle,this._physicsRig.inputs.at(r+l).getNormalizedParameterValue=Jh),this._physicsRig.inputs.at(r+l).source.targetType=Wi.CubismPhysicsTargetType_Parameter,this._physicsRig.inputs.at(r+l).source.id=s.getInputSourceId(a,l);r+=this._physicsRig.settings.at(a).inputCount,this._physicsRig.settings.at(a).outputCount=s.getOutputCount(a),this._physicsRig.settings.at(a).baseOutputIndex=n;for(let l=0;l<this._physicsRig.settings.at(a).outputCount;++l)this._physicsRig.outputs.at(n+l).destinationParameterIndex=-1,this._physicsRig.outputs.at(n+l).vertexIndex=s.getOutputVertexIndex(a,l),this._physicsRig.outputs.at(n+l).angleScale=s.getOutputAngleScale(a,l),this._physicsRig.outputs.at(n+l).weight=s.getOutputWeight(a,l),this._physicsRig.outputs.at(n+l).destination.targetType=Wi.CubismPhysicsTargetType_Parameter,this._physicsRig.outputs.at(n+l).destination.id=s.getOutputDestinationId(a,l),s.getOutputType(a,l)==ga?(this._physicsRig.outputs.at(n+l).type=ee.CubismPhysicsSource_X,this._physicsRig.outputs.at(n+l).getValue=Zh,this._physicsRig.outputs.at(n+l).getScale=sg):s.getOutputType(a,l)==da?(this._physicsRig.outputs.at(n+l).type=ee.CubismPhysicsSource_Y,this._physicsRig.outputs.at(n+l).getValue=Qh,this._physicsRig.outputs.at(n+l).getScale=rg):s.getOutputType(a,l)==fa&&(this._physicsRig.outputs.at(n+l).type=ee.CubismPhysicsSource_Angle,this._physicsRig.outputs.at(n+l).getValue=tg,this._physicsRig.outputs.at(n+l).getScale=ng),this._physicsRig.outputs.at(n+l).reflect=s.getOutputReflect(a,l);n+=this._physicsRig.settings.at(a).outputCount,this._physicsRig.settings.at(a).particleCount=s.getParticleCount(a),this._physicsRig.settings.at(a).baseParticleIndex=o;for(let l=0;l<this._physicsRig.settings.at(a).particleCount;++l)this._physicsRig.particles.at(o+l).mobility=s.getParticleMobility(a,l),this._physicsRig.particles.at(o+l).delay=s.getParticleDelay(a,l),this._physicsRig.particles.at(o+l).acceleration=s.getParticleAcceleration(a,l),this._physicsRig.particles.at(o+l).radius=s.getParticleRadius(a,l),this._physicsRig.particles.at(o+l).position=s.getParticlePosition(a,l);o+=this._physicsRig.settings.at(a).particleCount}this.initialize(),s.release(),s=void 0,s=null}initialize(){let t,i,s;for(let r=0;r<this._physicsRig.subRigCount;++r){i=this._physicsRig.settings.at(r),t=this._physicsRig.particles.get(i.baseParticleIndex),t[0].initialPosition=new A(0,0),t[0].lastPosition=new A(t[0].initialPosition.x,t[0].initialPosition.y),t[0].lastGravity=new A(0,-1),t[0].lastGravity.y*=-1,t[0].velocity=new A(0,0),t[0].force=new A(0,0);for(let n=1;n<i.particleCount;++n)s=new A(0,0),s.y=t[n].radius,t[n].initialPosition=new A(t[n-1].initialPosition.x+s.x,t[n-1].initialPosition.y+s.y),t[n].position=new A(t[n].initialPosition.x,t[n].initialPosition.y),t[n].lastPosition=new A(t[n].initialPosition.x,t[n].initialPosition.y),t[n].lastGravity=new A(0,-1),t[n].lastGravity.y*=-1,t[n].velocity=new A(0,0),t[n].force=new A(0,0)}}}class $o{constructor(){this.gravity=new A(0,0),this.wind=new A(0,0)}}function qh(e){let t=0;return e>0?t=1:e<0&&(t=-1),t}function Gh(e,t,i,s,r,n,o,a,l,u){e.x+=Xr(i,s,r,n,o.minimum,o.maximum,o.defalut,l)*u}function Kh(e,t,i,s,r,n,o,a,l,u){e.y+=Xr(i,s,r,n,o.minimum,o.maximum,o.defalut,l)*u}function Jh(e,t,i,s,r,n,o,a,l,u){t.angle+=Xr(i,s,r,n,a.minimum,a.maximum,a.defalut,l)*u}function Zh(e,t,i,s,r){let n=e.x;return s&&(n*=-1),n}function Qh(e,t,i,s,r){let n=e.y;return s&&(n*=-1),n}function tg(e,t,i,s,r){let n;return i>=2?r=t[i-1].position.substract(t[i-2].position):r=r.multiplyByScaler(-1),n=N.directionToRadian(r,e),s&&(n*=-1),n}function eg(e,t){const i=N.max(e,t),s=N.min(e,t);return N.abs(i-s)}function ig(e,t){return N.min(e,t)+eg(e,t)/2}function sg(e,t){return JSON.parse(JSON.stringify(e.x))}function rg(e,t){return JSON.parse(JSON.stringify(e.y))}function ng(e,t){return JSON.parse(JSON.stringify(t))}function ag(e,t,i,s,r,n,o,a){let l,u,h,d,f=new A(0,0),_=new A(0,0),m=new A(0,0),B=new A(0,0);e[0].position=new A(i.x,i.y),l=N.degreesToRadian(s),d=N.radianToDirection(l),d.normalize();for(let y=1;y<t;++y)e[y].force=d.multiplyByScaler(e[y].acceleration).add(r),e[y].lastPosition=new A(e[y].position.x,e[y].position.y),u=e[y].delay*o*30,f=e[y].position.substract(e[y-1].position),h=N.directionToRadian(e[y].lastGravity,d)/a,f.x=N.cos(h)*f.x-f.y*N.sin(h),f.y=N.sin(h)*f.x+f.y*N.cos(h),e[y].position=e[y-1].position.add(f),_=e[y].velocity.multiplyByScaler(u),m=e[y].force.multiplyByScaler(u).multiplyByScaler(u),e[y].position=e[y].position.add(_).add(m),B=e[y].position.substract(e[y-1].position),B.normalize(),e[y].position=e[y-1].position.add(B.multiplyByScaler(e[y].radius)),N.abs(e[y].position.x)<n&&(e[y].position.x=0),u!=0&&(e[y].velocity=e[y].position.substract(e[y].lastPosition),e[y].velocity=e[y].velocity.divisionByScalar(u),e[y].velocity=e[y].velocity.multiplyByScaler(e[y].mobility)),e[y].force=new A(0,0),e[y].lastGravity=new A(d.x,d.y)}function og(e,t,i,s,r){let n,o,a;n=r.getScale(r.translationScale,r.angleScale),o=s*n,o<t?(o<r.valueBelowMinimum&&(r.valueBelowMinimum=o),o=t):o>i&&(o>r.valueExceededMaximum&&(r.valueExceededMaximum=o),o=i),a=r.weight/Ho,a>=1||(o=e[0]*(1-a)+o*a),e[0]=o}function Xr(e,t,i,s,r,n,o,a){let l=0;const u=N.max(i,t);u<e&&(e=u);const h=N.min(i,t);h>e&&(e=h);const d=N.min(r,n),f=N.max(r,n),_=o,m=ig(h,u),B=e-m;switch(qh(B)){case 1:{const y=f-_,x=u-m;x!=0&&(l=B*(y/x),l+=_);break}case-1:{const y=d-_,x=h-m;x!=0&&(l=B*(y/x),l+=_);break}case 0:{l=_;break}}return a?l:l*-1}var lr;(e=>{e.CubismPhysics=mi,e.Options=$o})(lr||(lr={}));class qi{constructor(t,i,s,r){this.x=t,this.y=i,this.width=s,this.height=r}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}expand(t,i){this.x-=t,this.y-=i,this.width+=t*2,this.height+=i*2}}var _a;(e=>{e.csmRect=qi})(_a||(_a={}));const ws=4,lg=10;let ge,ri,ur;class Di{getChannelFlagAsColor(t){return this._channelColors.at(t)}getMaskRenderTexture(){let t=0;if(this._maskTexture&&this._maskTexture.texture!=0&&(this._maskTexture.frameNo=this._currentFrameNo,t=this._maskTexture.texture),t==0){const i=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i,i,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),t=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,ur),this._maskTexture=new Wo(this._currentFrameNo,t)}return t}setGL(t){this.gl=t}calcClippedDrawTotalBounds(t,i){let s=Number.MAX_VALUE,r=Number.MAX_VALUE,n=Number.MIN_VALUE,o=Number.MIN_VALUE;const a=i._clippedDrawableIndexList.length;for(let l=0;l<a;l++){const u=i._clippedDrawableIndexList[l],h=t.getDrawableVertexCount(u),d=t.getDrawableVertices(u);let f=Number.MAX_VALUE,_=Number.MAX_VALUE,m=Number.MIN_VALUE,B=Number.MIN_VALUE;const y=h*re.vertexStep;for(let x=re.vertexOffset;x<y;x+=re.vertexStep){const V=d[x],T=d[x+1];V<f&&(f=V),V>m&&(m=V),T<_&&(_=T),T>B&&(B=T)}if(f!=Number.MAX_VALUE)if(f<s&&(s=f),_<r&&(r=_),m>n&&(n=m),B>o&&(o=B),s==Number.MAX_VALUE)i._allClippedDrawRect.x=0,i._allClippedDrawRect.y=0,i._allClippedDrawRect.width=0,i._allClippedDrawRect.height=0,i._isUsing=!1;else{i._isUsing=!0;const x=n-s,V=o-r;i._allClippedDrawRect.x=s,i._allClippedDrawRect.y=r,i._allClippedDrawRect.width=x,i._allClippedDrawRect.height=V}}}constructor(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=new j,this._clippingContextListForDraw=new j,this._channelColors=new j,this._tmpBoundsOnModel=new qi,this._tmpMatrix=new Ct,this._tmpMatrixForMask=new Ct,this._tmpMatrixForDraw=new Ct,this._maskTexture=null;let t=new ke;t.R=1,t.G=0,t.B=0,t.A=0,this._channelColors.pushBack(t),t=new ke,t.R=0,t.G=1,t.B=0,t.A=0,this._channelColors.pushBack(t),t=new ke,t.R=0,t.G=0,t.B=1,t.A=0,this._channelColors.pushBack(t),t=new ke,t.R=0,t.G=0,t.B=0,t.A=1,this._channelColors.pushBack(t)}release(){for(let t=0;t<this._clippingContextListForMask.getSize();t++)this._clippingContextListForMask.at(t)&&(this._clippingContextListForMask.at(t).release(),this._clippingContextListForMask.set(t,void 0)),this._clippingContextListForMask.set(t,null);this._clippingContextListForMask=null;for(let t=0;t<this._clippingContextListForDraw.getSize();t++)this._clippingContextListForDraw.set(t,null);this._clippingContextListForDraw=null,this._maskTexture&&(this.gl.deleteFramebuffer(this._maskTexture.texture),this._maskTexture=null);for(let t=0;t<this._channelColors.getSize();t++)this._channelColors.set(t,null);this._channelColors=null,this.gl.deleteTexture(this._colorBuffer),this._colorBuffer=null}initialize(t,i,s,r){for(let n=0;n<i;n++){if(r[n]<=0){this._clippingContextListForDraw.pushBack(null);continue}let o=this.findSameClip(s[n],r[n]);o==null&&(o=new qo(this,s[n],r[n]),this._clippingContextListForMask.pushBack(o)),o.addClippedDrawable(n),this._clippingContextListForDraw.pushBack(o)}}setupClippingContext(t,i){this._currentFrameNo++;let s=0;for(let r=0;r<this._clippingContextListForMask.getSize();r++){const n=this._clippingContextListForMask.at(r);this.calcClippedDrawTotalBounds(t,n),n._isUsing&&s++}if(s>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture(),i.getMvpMatrix(),i.preDraw(),this.setupLayoutBounds(s),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(let r=0;r<this._clippingContextListForMask.getSize();r++){const n=this._clippingContextListForMask.at(r),o=n._allClippedDrawRect,a=n._layoutBounds,l=.05;this._tmpBoundsOnModel.setRect(o),this._tmpBoundsOnModel.expand(o.width*l,o.height*l);const u=a.width/this._tmpBoundsOnModel.width,h=a.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(a.x,a.y),this._tmpMatrix.scaleRelative(u,h),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(a.x,a.y),this._tmpMatrix.scaleRelative(u,h),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),n._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),n._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());const d=n._clippingIdCount;for(let f=0;f<d;f++){const _=n._clippingIdList[f];!t.getDrawableDynamicFlagVertexPositionsDidChange(_)||(i.setIsCulling(t.getDrawableCulling(_)!=!1),i.setClippingContextBufferForMask(n),i.drawMesh(t.getDrawableTextureIndices(_),t.getDrawableVertexIndexCount(_),t.getDrawableVertexCount(_),t.getDrawableVertexIndices(_),t.getDrawableVertices(_),t.getDrawableVertexUvs(_),t.getDrawableOpacity(_),Xt.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,ur),i.setClippingContextBufferForMask(null),this.gl.viewport(ri[0],ri[1],ri[2],ri[3])}}findSameClip(t,i){for(let s=0;s<this._clippingContextListForMask.getSize();s++){const r=this._clippingContextListForMask.at(s),n=r._clippingIdCount;if(n!=i)continue;let o=0;for(let a=0;a<n;a++){const l=r._clippingIdList[a];for(let u=0;u<n;u++)if(t[u]==l){o++;break}}if(o==n)return r}return null}setupLayoutBounds(t){let i=t/ws,s=t%ws;i=~~i,s=~~s;let r=0;for(let n=0;n<ws;n++){const o=i+(n<s?1:0);if(o!=0)if(o==1){const a=this._clippingContextListForMask.at(r++);a._layoutChannelNo=n,a._layoutBounds.x=0,a._layoutBounds.y=0,a._layoutBounds.width=1,a._layoutBounds.height=1}else if(o==2)for(let a=0;a<o;a++){let l=a%2;l=~~l;const u=this._clippingContextListForMask.at(r++);u._layoutChannelNo=n,u._layoutBounds.x=l*.5,u._layoutBounds.y=0,u._layoutBounds.width=.5,u._layoutBounds.height=1}else if(o<=4)for(let a=0;a<o;a++){let l=a%2,u=a/2;l=~~l,u=~~u;const h=this._clippingContextListForMask.at(r++);h._layoutChannelNo=n,h._layoutBounds.x=l*.5,h._layoutBounds.y=u*.5,h._layoutBounds.width=.5,h._layoutBounds.height=.5}else if(o<=9)for(let a=0;a<o;a++){let l=a%3,u=a/3;l=~~l,u=~~u;const h=this._clippingContextListForMask.at(r++);h._layoutChannelNo=n,h._layoutBounds.x=l/3,h._layoutBounds.y=u/3,h._layoutBounds.width=1/3,h._layoutBounds.height=1/3}else se("not supported mask count : {0}",o)}}getColorBuffer(){return this._colorBuffer}getClippingContextListForDraw(){return this._clippingContextListForDraw}setClippingMaskBufferSize(t){this._clippingMaskBufferSize=t}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}}class Wo{constructor(t,i){this.frameNo=t,this.texture=i}}class qo{constructor(t,i,s){this._owner=t,this._clippingIdList=i,this._clippingIdCount=s,this._allClippedDrawRect=new qi,this._layoutBounds=new qi,this._clippedDrawableIndexList=[],this._matrixForMask=new Ct,this._matrixForDraw=new Ct}release(){this._layoutBounds!=null&&(this._layoutBounds=null),this._allClippedDrawRect!=null&&(this._allClippedDrawRect=null),this._clippedDrawableIndexList!=null&&(this._clippedDrawableIndexList=null)}addClippedDrawable(t){this._clippedDrawableIndexList.push(t)}getClippingManager(){return this._owner}setGl(t){this._owner.setGL(t)}}class je{static getInstance(){return ge==null&&(ge=new je),ge}static deleteInstance(){ge&&(ge.release(),ge=null)}constructor(){this._shaderSets=new j}release(){this.releaseShaderProgram()}setupShaderProgram(t,i,s,r,n,o,a,l,u,h,d,f,_){d||se("NoPremultipliedAlpha is not allowed"),this._shaderSets.getSize()==0&&this.generateShaders();let m,B,y,x;if(t.getClippingContextBufferForMask()!=null){const V=this._shaderSets.at(Ne.ShaderNames_SetupMask);this.gl.useProgram(V.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(V.samplerTexture0Location,0),a.vertex==null&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,r,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(V.attributePositionLocation),this.gl.vertexAttribPointer(V.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),a.uv==null&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(V.attributeTexCoordLocation),this.gl.vertexAttribPointer(V.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const T=t.getClippingContextBufferForMask()._layoutChannelNo,I=t.getClippingContextBufferForMask().getClippingManager().getChannelFlagAsColor(T);this.gl.uniform4f(V.uniformChannelFlagLocation,I.R,I.G,I.B,I.A),this.gl.uniformMatrix4fv(V.uniformClipMatrixLocation,!1,t.getClippingContextBufferForMask()._matrixForMask.getArray());const z=t.getClippingContextBufferForMask()._layoutBounds;this.gl.uniform4f(V.uniformBaseColorLocation,z.x*2-1,z.y*2-1,z.getRight()*2-1,z.getBottom()*2-1),m=this.gl.ZERO,B=this.gl.ONE_MINUS_SRC_COLOR,y=this.gl.ZERO,x=this.gl.ONE_MINUS_SRC_ALPHA}else{const V=t.getClippingContextBufferForDraw()!=null,T=V?_?2:1:0;let I=new cr;switch(u){case Xt.CubismBlendMode_Normal:default:I=this._shaderSets.at(Ne.ShaderNames_NormalPremultipliedAlpha+T),m=this.gl.ONE,B=this.gl.ONE_MINUS_SRC_ALPHA,y=this.gl.ONE,x=this.gl.ONE_MINUS_SRC_ALPHA;break;case Xt.CubismBlendMode_Additive:I=this._shaderSets.at(Ne.ShaderNames_AddPremultipliedAlpha+T),m=this.gl.ONE,B=this.gl.ONE,y=this.gl.ZERO,x=this.gl.ONE;break;case Xt.CubismBlendMode_Multiplicative:I=this._shaderSets.at(Ne.ShaderNames_MultPremultipliedAlpha+T),m=this.gl.DST_COLOR,B=this.gl.ONE_MINUS_SRC_ALPHA,y=this.gl.ZERO,x=this.gl.ONE;break}if(this.gl.useProgram(I.shaderProgram),a.vertex==null&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,r,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(I.attributePositionLocation),this.gl.vertexAttribPointer(I.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),a.uv==null&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(I.attributeTexCoordLocation),this.gl.vertexAttribPointer(I.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),V){this.gl.activeTexture(this.gl.TEXTURE1);const z=t.getClippingContextBufferForDraw().getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,z),this.gl.uniform1i(I.samplerTexture1Location,1),this.gl.uniformMatrix4fv(I.uniformClipMatrixLocation,!1,t.getClippingContextBufferForDraw()._matrixForDraw.getArray());const st=t.getClippingContextBufferForDraw()._layoutChannelNo,k=t.getClippingContextBufferForDraw().getClippingManager().getChannelFlagAsColor(st);this.gl.uniform4f(I.uniformChannelFlagLocation,k.R,k.G,k.B,k.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(I.samplerTexture0Location,0),this.gl.uniformMatrix4fv(I.uniformMatrixLocation,!1,f.getArray()),this.gl.uniform4f(I.uniformBaseColorLocation,h.R,h.G,h.B,h.A)}a.index==null&&(a.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(m,B,y,x)}releaseShaderProgram(){for(let t=0;t<this._shaderSets.getSize();t++)this.gl.deleteProgram(this._shaderSets.at(t).shaderProgram),this._shaderSets.at(t).shaderProgram=0,this._shaderSets.set(t,void 0),this._shaderSets.set(t,null)}generateShaders(){for(let t=0;t<lg;t++)this._shaderSets.pushBack(new cr);this._shaderSets.at(0).shaderProgram=this.loadShaderProgram(ug,cg),this._shaderSets.at(1).shaderProgram=this.loadShaderProgram(hg,gg),this._shaderSets.at(2).shaderProgram=this.loadShaderProgram(pa,dg),this._shaderSets.at(3).shaderProgram=this.loadShaderProgram(pa,fg),this._shaderSets.at(4).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(5).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(6).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(7).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(8).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(9).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(0).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_position"),this._shaderSets.at(0).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_texCoord"),this._shaderSets.at(0).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"s_texture0"),this._shaderSets.at(0).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_clipMatrix"),this._shaderSets.at(0).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_channelFlag"),this._shaderSets.at(0).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_baseColor"),this._shaderSets.at(1).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_position"),this._shaderSets.at(1).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_texCoord"),this._shaderSets.at(1).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"s_texture0"),this._shaderSets.at(1).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_matrix"),this._shaderSets.at(1).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_baseColor"),this._shaderSets.at(2).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_position"),this._shaderSets.at(2).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_texCoord"),this._shaderSets.at(2).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture0"),this._shaderSets.at(2).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture1"),this._shaderSets.at(2).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_matrix"),this._shaderSets.at(2).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_clipMatrix"),this._shaderSets.at(2).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_channelFlag"),this._shaderSets.at(2).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_baseColor"),this._shaderSets.at(3).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_position"),this._shaderSets.at(3).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_texCoord"),this._shaderSets.at(3).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture0"),this._shaderSets.at(3).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture1"),this._shaderSets.at(3).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_matrix"),this._shaderSets.at(3).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_clipMatrix"),this._shaderSets.at(3).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_channelFlag"),this._shaderSets.at(3).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_baseColor"),this._shaderSets.at(4).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_position"),this._shaderSets.at(4).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_texCoord"),this._shaderSets.at(4).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"s_texture0"),this._shaderSets.at(4).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_matrix"),this._shaderSets.at(4).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_baseColor"),this._shaderSets.at(5).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_position"),this._shaderSets.at(5).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_texCoord"),this._shaderSets.at(5).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture0"),this._shaderSets.at(5).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture1"),this._shaderSets.at(5).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_matrix"),this._shaderSets.at(5).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_clipMatrix"),this._shaderSets.at(5).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_channelFlag"),this._shaderSets.at(5).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_baseColor"),this._shaderSets.at(6).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_position"),this._shaderSets.at(6).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_texCoord"),this._shaderSets.at(6).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture0"),this._shaderSets.at(6).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture1"),this._shaderSets.at(6).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_matrix"),this._shaderSets.at(6).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_clipMatrix"),this._shaderSets.at(6).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_channelFlag"),this._shaderSets.at(6).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_baseColor"),this._shaderSets.at(7).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_position"),this._shaderSets.at(7).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_texCoord"),this._shaderSets.at(7).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"s_texture0"),this._shaderSets.at(7).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_matrix"),this._shaderSets.at(7).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_baseColor"),this._shaderSets.at(8).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_position"),this._shaderSets.at(8).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_texCoord"),this._shaderSets.at(8).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture0"),this._shaderSets.at(8).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture1"),this._shaderSets.at(8).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_matrix"),this._shaderSets.at(8).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_clipMatrix"),this._shaderSets.at(8).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_channelFlag"),this._shaderSets.at(8).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_baseColor"),this._shaderSets.at(9).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_position"),this._shaderSets.at(9).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_texCoord"),this._shaderSets.at(9).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture0"),this._shaderSets.at(9).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture1"),this._shaderSets.at(9).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_matrix"),this._shaderSets.at(9).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_clipMatrix"),this._shaderSets.at(9).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_channelFlag"),this._shaderSets.at(9).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_baseColor")}loadShaderProgram(t,i){let s=this.gl.createProgram(),r=this.compileShaderSource(this.gl.VERTEX_SHADER,t);if(!r)return se("Vertex shader compile error!"),0;let n=this.compileShaderSource(this.gl.FRAGMENT_SHADER,i);return n?(this.gl.attachShader(s,r),this.gl.attachShader(s,n),this.gl.linkProgram(s),this.gl.getProgramParameter(s,this.gl.LINK_STATUS)?(this.gl.deleteShader(r),this.gl.deleteShader(n),s):(se("Failed to link program: {0}",s),this.gl.deleteShader(r),r=0,this.gl.deleteShader(n),n=0,s&&(this.gl.deleteProgram(s),s=0),0)):(se("Vertex shader compile error!"),0)}compileShaderSource(t,i){const s=i,r=this.gl.createShader(t);if(this.gl.shaderSource(r,s),this.gl.compileShader(r),!r){const o=this.gl.getShaderInfoLog(r);se("Shader compile log: {0} ",o)}return this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)?r:(this.gl.deleteShader(r),null)}setGl(t){this.gl=t}}class cr{}var Ne=(e=>(e[e.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",e[e.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",e[e.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",e[e.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",e[e.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",e[e.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",e[e.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",e[e.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",e[e.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",e[e.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",e))(Ne||{});const ug="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",cg="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",hg="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",pa="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",gg="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",dg="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",fg="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";class Yr extends ss{constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._clippingManager=new Di,this.firstDraw=!0,this._textures=new jt,this._sortedDrawableIndexList=new j,this._bufferData={vertex:WebGLBuffer=null,uv:WebGLBuffer=null,index:WebGLBuffer=null},this._textures.prepareCapacity(32,!0)}initialize(t){t.isUsingMasking()&&(this._clippingManager=new Di,this._clippingManager.initialize(t,t.getDrawableCount(),t.getDrawableMasks(),t.getDrawableMaskCounts())),this._sortedDrawableIndexList.resize(t.getDrawableCount(),0),super.initialize(t)}bindTexture(t,i){this._textures.setValue(t,i)}getBindedTextures(){return this._textures}setClippingMaskBufferSize(t){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this._clippingManager=new Di,this._clippingManager.setClippingMaskBufferSize(t),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())}getClippingMaskBufferSize(){return this._clippingManager.getClippingMaskBufferSize()}release(){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this.gl.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,this.gl.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,this.gl.deleteBuffer(this._bufferData.index),this._bufferData.index=null,this._bufferData=null,this._textures=null}doDrawModel(){this._clippingManager!=null&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();const t=this.getModel().getDrawableCount(),i=this.getModel().getDrawableRenderOrders();for(let s=0;s<t;++s){const r=i[s];this._sortedDrawableIndexList.set(r,s)}for(let s=0;s<t;++s){const r=this._sortedDrawableIndexList.at(s);!this.getModel().getDrawableDynamicFlagIsVisible(r)||(this.setClippingContextBufferForDraw(this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw().at(r):null),this.setIsCulling(this.getModel().getDrawableCulling(r)),this.drawMesh(this.getModel().getDrawableTextureIndices(r),this.getModel().getDrawableVertexIndexCount(r),this.getModel().getDrawableVertexCount(r),this.getModel().getDrawableVertexIndices(r),this.getModel().getDrawableVertices(r),this.getModel().getDrawableVertexUvs(r),this.getModel().getDrawableOpacity(r),this.getModel().getDrawableBlendMode(r),this.getModel().getDrawableInvertedMaskBit(r)))}}drawMesh(t,i,s,r,n,o,a,l,u){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const h=this.getModelColor();this.getClippingContextBufferForMask()==null&&(h.A*=a,this.isPremultipliedAlpha()&&(h.R*=h.A,h.G*=h.A,h.B*=h.A));let d;this._textures.getValue(t)!=null?d=this._textures.getValue(t):d=null,je.getInstance().setupShaderProgram(this,d,s,n,r,o,this._bufferData,a,l,h,this.isPremultipliedAlpha(),this.getMvpMatrix(),u),this.gl.drawElements(this.gl.TRIANGLES,i,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}static doStaticRelease(){je.deleteInstance()}setRenderState(t,i){ur=t,ri=i}preDraw(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}setClippingContextBufferForMask(t){this._clippingContextBufferForMask=t}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(t){this._clippingContextBufferForDraw=t}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(t){this.gl=t,this._clippingManager.setGL(t),je.getInstance().setGl(t)}}ss.staticRelease=()=>{Yr.doStaticRelease()};var ma;(e=>{e.CubismClippingContext=qo,e.CubismClippingManager_WebGL=Di,e.CubismRenderTextureResource=Wo,e.CubismRenderer_WebGL=Yr,e.CubismShaderSet=cr,e.CubismShader_WebGL=je,e.ShaderNames=Ne})(ma||(ma={}));class Go{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const t=this._model.parameters.count,i=this._savedParameters.getSize();for(let s=0;s<t;++s)s<i?this._savedParameters.set(s,this._parameterValues[s]):this._savedParameters.pushBack(this._parameterValues[s])}getModel(){return this._model}getPartIndex(t){let i;const s=this._model.parts.count;for(i=0;i<s;++i)if(t==this._partIds.at(i))return i;return this._notExistPartId.isExist(t)?this._notExistPartId.getValue(t):(i=s+this._notExistPartId.getSize(),this._notExistPartId.setValue(t,i),this._notExistPartOpacities.appendKey(i),i)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(t,i){if(this._notExistPartOpacities.isExist(t)){this._notExistPartOpacities.setValue(t,i);return}At(0<=t&&t<this.getPartCount()),this._partOpacities[t]=i}setPartOpacityById(t,i){const s=this.getPartIndex(t);s<0||this.setPartOpacityByIndex(s,i)}getPartOpacityByIndex(t){return this._notExistPartOpacities.isExist(t)?this._notExistPartOpacities.getValue(t):(At(0<=t&&t<this.getPartCount()),this._partOpacities[t])}getPartOpacityById(t){const i=this.getPartIndex(t);return i<0?0:this.getPartOpacityByIndex(i)}getParameterIndex(t){let i;const s=this._model.parameters.count;for(i=0;i<s;++i)if(t==this._parameterIds.at(i))return i;return this._notExistParameterId.isExist(t)?this._notExistParameterId.getValue(t):(i=this._model.parameters.count+this._notExistParameterId.getSize(),this._notExistParameterId.setValue(t,i),this._notExistParameterValues.appendKey(i),i)}getParameterCount(){return this._model.parameters.count}getParameterMaximumValue(t){return this._model.parameters.maximumValues[t]}getParameterMinimumValue(t){return this._model.parameters.minimumValues[t]}getParameterDefaultValue(t){return this._model.parameters.defaultValues[t]}getParameterValueByIndex(t){return this._notExistParameterValues.isExist(t)?this._notExistParameterValues.getValue(t):(At(0<=t&&t<this.getParameterCount()),this._parameterValues[t])}getParameterValueById(t){const i=this.getParameterIndex(t);return this.getParameterValueByIndex(i)}setParameterValueByIndex(t,i,s=1){if(this._notExistParameterValues.isExist(t)){this._notExistParameterValues.setValue(t,s==1?i:this._notExistParameterValues.getValue(t)*(1-s)+i*s);return}At(0<=t&&t<this.getParameterCount()),this._model.parameters.maximumValues[t]<i&&(i=this._model.parameters.maximumValues[t]),this._model.parameters.minimumValues[t]>i&&(i=this._model.parameters.minimumValues[t]),this._parameterValues[t]=s==1?i:this._parameterValues[t]=this._parameterValues[t]*(1-s)+i*s}setParameterValueById(t,i,s=1){const r=this.getParameterIndex(t);this.setParameterValueByIndex(r,i,s)}addParameterValueByIndex(t,i,s=1){this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)+i*s)}addParameterValueById(t,i,s=1){const r=this.getParameterIndex(t);this.addParameterValueByIndex(r,i,s)}multiplyParameterValueById(t,i,s=1){const r=this.getParameterIndex(t);this.multiplyParameterValueByIndex(r,i,s)}multiplyParameterValueByIndex(t,i,s=1){this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)*(1+(i-1)*s))}getDrawableIndex(t){const i=this._model.drawables.count;for(let s=0;s<i;++s)if(this._drawableIds.at(s)==t)return s;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(t){const i=this._model.drawables.ids;return it.getIdManager().getId(i[t])}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(t){return this._model.drawables.textureIndices[t]}getDrawableDynamicFlagVertexPositionsDidChange(t){const i=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(i[t])}getDrawableVertexIndexCount(t){return this._model.drawables.indexCounts[t]}getDrawableVertexCount(t){return this._model.drawables.vertexCounts[t]}getDrawableVertices(t){return this.getDrawableVertexPositions(t)}getDrawableVertexIndices(t){return this._model.drawables.indices[t]}getDrawableVertexPositions(t){return this._model.drawables.vertexPositions[t]}getDrawableVertexUvs(t){return this._model.drawables.vertexUvs[t]}getDrawableOpacity(t){return this._model.drawables.opacities[t]}getDrawableCulling(t){const i=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(i[t])}getDrawableBlendMode(t){const i=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(i[t])?Xt.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(i[t])?Xt.CubismBlendMode_Multiplicative:Xt.CubismBlendMode_Normal}getDrawableInvertedMaskBit(t){const i=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(i[t])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let t=0;t<this._model.drawables.count;++t)if(!(this._model.drawables.maskCounts[t]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(t){const i=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(i[t])}getDrawableDynamicFlagVisibilityDidChange(t){const i=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(i[t])}getDrawableDynamicFlagOpacityDidChange(t){const i=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(i[t])}getDrawableDynamicFlagRenderOrderDidChange(t){const i=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(i[t])}loadParameters(){let t=this._model.parameters.count;const i=this._savedParameters.getSize();t>i&&(t=i);for(let s=0;s<t;++s)this._parameterValues[s]=this._savedParameters.at(s)}initialize(){At(this._model),this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const t=this._model.parameters.ids,i=this._model.parameters.count;this._parameterIds.prepareCapacity(i);for(let s=0;s<i;++s)this._parameterIds.pushBack(it.getIdManager().getId(t[s]))}{const t=this._model.parts.ids,i=this._model.parts.count;this._partIds.prepareCapacity(i);for(let s=0;s<i;++s)this._partIds.pushBack(it.getIdManager().getId(t[s]))}{const t=this._model.drawables.ids,i=this._model.drawables.count;this._drawableIds.prepareCapacity(i);for(let s=0;s<i;++s)this._drawableIds.pushBack(it.getIdManager().getId(t[s]))}}constructor(t){this._model=t,this._parameterValues=null,this._parameterMaximumValues=null,this._parameterMinimumValues=null,this._partOpacities=null,this._savedParameters=new j,this._parameterIds=new j,this._drawableIds=new j,this._partIds=new j,this._notExistPartId=new jt,this._notExistParameterId=new jt,this._notExistParameterValues=new jt,this._notExistPartOpacities=new jt}release(){this._model.release(),this._model=null}}var ya;(e=>{e.CubismModel=Go})(ya||(ya={}));class ls{static create(t){let i=null;const s=Live2DCubismCore.Moc.fromArrayBuffer(t);return s&&(i=new ls(s)),i}static delete(t){t._moc._release(),t._moc=null,t=null}createModel(){let t=null;const i=Live2DCubismCore.Model.fromMoc(this._moc);return i&&(t=new Go(i),t.initialize(),++this._modelCount),t}deleteModel(t){t!=null&&(t.release(),t=null,--this._modelCount)}constructor(t){this._moc=t,this._modelCount=0}release(){At(this._modelCount==0),this._moc._release(),this._moc=null}}var xa;(e=>{e.CubismMoc=ls})(xa||(xa={}));const Sa="Meta",_g="UserDataCount",pg="TotalUserDataSize",Ts="UserData",mg="Target",yg="Id",xg="Value";class Ko{constructor(t,i){this._json=lt.create(t,i)}release(){lt.delete(this._json)}getUserDataCount(){return this._json.getRoot().getValueByString(Sa).getValueByString(_g).toInt()}getTotalUserDataSize(){return this._json.getRoot().getValueByString(Sa).getValueByString(pg).toInt()}getUserDataTargetType(t){return this._json.getRoot().getValueByString(Ts).getValueByIndex(t).getValueByString(mg).getRawString()}getUserDataId(t){return it.getIdManager().getId(this._json.getRoot().getValueByString(Ts).getValueByIndex(t).getValueByString(yg).getRawString())}getUserDataValue(t){return this._json.getRoot().getValueByString(Ts).getValueByIndex(t).getValueByString(xg).getRawString()}}var Ca;(e=>{e.CubismModelUserDataJson=Ko})(Ca||(Ca={}));const Sg="ArtMesh";class Jo{}class yi{static create(t,i){const s=new yi;return s.parseUserData(t,i),s}static delete(t){t!=null&&(t.release(),t=null)}getArtMeshUserDatas(){return this._artMeshUserDataNode}parseUserData(t,i){let s=new Ko(t,i);const r=it.getIdManager().getId(Sg),n=s.getUserDataCount();for(let o=0;o<n;o++){const a=new Jo;a.targetId=s.getUserDataId(o),a.targetType=it.getIdManager().getId(s.getUserDataTargetType(o)),a.value=new vt(s.getUserDataValue(o)),this._userDataNodes.pushBack(a),a.targetType==r&&this._artMeshUserDataNode.pushBack(a)}s.release(),s=void 0}constructor(){this._userDataNodes=new j,this._artMeshUserDataNode=new j}release(){for(let t=0;t<this._userDataNodes.getSize();++t)this._userDataNodes.set(t,null);this._userDataNodes=null}}var ba;(e=>{e.CubismModelUserData=yi,e.CubismModelUserDataNode=Jo})(ba||(ba={}));class Hr{constructor(){this.loadMotion=(t,i,s,r)=>os.create(t,i,r),this._moc=null,this._model=null,this._motionManager=null,this._expressionManager=null,this._eyeBlink=null,this._breath=null,this._modelMatrix=null,this._pose=null,this._dragManager=null,this._physics=null,this._modelUserData=null,this._initialized=!1,this._updating=!1,this._opacity=1,this._lipsync=!0,this._lastLipSyncValue=0,this._dragX=0,this._dragY=0,this._accelerationX=0,this._accelerationY=0,this._accelerationZ=0,this._debugMode=!1,this._renderer=null,this._motionManager=new nr,this._motionManager.setEventCallback(Hr.cubismDefaultMotionEventCallback,this),this._expressionManager=new nr,this._dragManager=new wo}isInitialized(){return this._initialized}setInitialized(t){this._initialized=t}isUpdating(){return this._updating}setUpdating(t){this._updating=t}setDragging(t,i){this._dragManager.set(t,i)}setAcceleration(t,i,s){this._accelerationX=t,this._accelerationY=i,this._accelerationZ=s}getModelMatrix(){return this._modelMatrix}setOpacity(t){this._opacity=t}getOpacity(){return this._opacity}loadModel(t){if(this._moc=ls.create(t),this._model=this._moc.createModel(),this._model.saveParameters(),this._moc==null||this._model==null){se("Failed to CreateModel().");return}this._modelMatrix=new Vo(this._model.getCanvasWidth(),this._model.getCanvasHeight())}loadExpression(t,i,s){return as.create(t,i)}loadPose(t,i){this._pose=_i.create(t,i)}loadUserData(t,i){this._modelUserData=yi.create(t,i)}loadPhysics(t,i){this._physics=mi.create(t,i)}isHit(t,i,s){const r=this._model.getDrawableIndex(t);if(r<0)return!1;const n=this._model.getDrawableVertexCount(r),o=this._model.getDrawableVertices(r);let a=o[0],l=o[0],u=o[1],h=o[1];for(let _=1;_<n;++_){const m=o[re.vertexOffset+_*re.vertexStep],B=o[re.vertexOffset+_*re.vertexStep+1];m<a&&(a=m),m>l&&(l=m),B<u&&(u=B),B>h&&(h=B)}const d=this._modelMatrix.invertTransformX(i),f=this._modelMatrix.invertTransformY(s);return a<=d&&d<=l&&u<=f&&f<=h}getModel(){return this._model}getRenderer(){return this._renderer}createRenderer(){this._renderer&&this.deleteRenderer(),this._renderer=new Yr,this._renderer.initialize(this._model)}deleteRenderer(){this._renderer!=null&&(this._renderer.release(),this._renderer=null)}motionEventFired(t){ie("{0}",t.s)}static cubismDefaultMotionEventCallback(t,i,s){const r=s;r!=null&&r.motionEventFired(i)}release(){this._motionManager!=null&&(this._motionManager.release(),this._motionManager=null),this._expressionManager!=null&&(this._expressionManager.release(),this._expressionManager=null),this._moc!=null&&(this._moc.deleteModel(this._model),this._moc.release(),this._moc=null),this._modelMatrix=null,_i.delete(this._pose),Nr.delete(this._eyeBlink),rs.delete(this._breath),this._dragManager=null,mi.delete(this._physics),yi.delete(this._modelUserData),this.deleteRenderer()}}var hr;(e=>{e.CubismUserModel=Hr})(hr||(hr={}));const de=it;class Lg extends Zs.ICubismModelSetting{}class Cg extends Qs.CubismModelSettingJson{}class bg extends Ks.CubismMatrix44{}class Bg extends hr.CubismUserModel{}class Ag extends ir.ACubismMotion{}class Dg extends rr.CubismMotion{}class kg extends sr.CubismExpressionMotion{}class Og extends ar.CubismMotionManager{}class Ng extends lr.CubismPhysics{}class Mg extends er.CubismEyeBlink{}class Fi extends Gs.csmVector{}class Ig extends Bg{constructor(){super();ut(this,"motionResources");ut(this,"expressionResources");ut(this,"lipSyncParamIds",new Fi);ut(this,"eyeBlinkParamIds",new Fi);this.motionResources={},this.expressionResources={},this.lipSyncParamIds=new Fi,this.eyeBlinkParamIds=new Fi,this._lipsync=!1}setEyeBlink(i){this._eyeBlink=i}addEyeBlinkParameterId(i){this.eyeBlinkParamIds.pushBack(i)}addLipSyncParameterId(i){this.lipSyncParamIds.pushBack(i)}addMotion(i,s,r=1,n=1){const o=this.loadMotion(i,i.byteLength,s);return r>0&&o.setFadeInTime(r),n>0&&o.setFadeOutTime(n),o.setEffectIds(this.eyeBlinkParamIds,this.lipSyncParamIds),this.motionResources[s]=o,s}addExpression(i,s,r=1,n=1){const o=this.loadExpression(i,i.byteLength,s);return r>0&&o.setFadeInTime(r),n>0&&o.setFadeOutTime(n),this.expressionResources[s]=o,s}get motionNames(){return Object.keys(this.motionResources)}get isMotionFinished(){return this._motionManager.isFinished()}startMotionByName(i){const s=this.motionResources[i];!s||this._motionManager.startMotionPriority(s,!1,0)}startExpressionByName(i){const s=this.expressionResources[i];!s||this._expressionManager.startMotionPriority(s,!1,1)}update(i){this.getModel().loadParameters();const s=this._motionManager.updateMotion(this.getModel(),i),r=this._expressionManager.updateMotion(this.getModel(),i);this.getModel().saveParameters(),!s&&!r&&this._eyeBlink!=null&&this._eyeBlink.updateParameters(this._model,i),this._pose!==null&&this._pose.updateParameters(this._model,0),this._physics!=null&&this._physics.evaluate(this._model,i),this._model.update()}}const vg={autoBlink:!0,x:0,y:0,scale:1};let Ba=!1;class Pg{constructor(t){ut(this,"canvas");ut(this,"model",new Ig);ut(this,"point",new So);this.canvas=t}async init(t,i,s={}){const r=this.canvas.getContext("webgl");if(r===null)throw new Error("WebGL\u672A\u5BFE\u5FDC\u306E\u30D6\u30E9\u30A6\u30B6\u3067\u3059\u3002");r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.clearColor(0,0,0,0),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL);const n=Object.assign({},vg,s),o=r.getParameter(r.FRAMEBUFFER_BINDING);Ba||(de.startUp(),de.initialize(),Ba=!0);const a=new Cg(t,t.byteLength),{moc3:l,textures:u,physics:h,expressions:d,motions:f}=i;this.model.loadModel(l),this.model.createRenderer();let _=0;for(const L of u){const $=await Vg(L,r);this.model.getRenderer().bindTexture(_,$),_++}this.model.getRenderer().setIsPremultipliedAlpha(!0),this.model.getRenderer().startUp(r),n.autoBlink&&this.model.setEyeBlink(Mg.create(a));for(let L=0,$=a.getEyeBlinkParameterCount();L<$;L++)this.model.addEyeBlinkParameterId(a.getEyeBlinkParameterId(L));for(let L=0,$=a.getLipSyncParameterCount();L<$;L++)this.model.addLipSyncParameterId(a.getLipSyncParameterId(L));this.model.loadPhysics(h,h.byteLength);for(const[L,$]of d)this.model.addExpression($,L);for(const[L,$]of f)this.model.addMotion($,L);const m=Object.assign({x:0,y:0,z:1},{x:n.x,y:n.y,z:n.scale}),B=new bg,y=()=>{this.canvas.width=this.canvas.clientWidth*devicePixelRatio,this.canvas.height=this.canvas.clientHeight*devicePixelRatio;const L=this.model.getModelMatrix();L.bottom(0),L.centerY(-1),L.translateY(-1),B.loadIdentity();const $=this.canvas.height/this.canvas.width;1<$?L.scale(1,this.canvas.width/this.canvas.height):L.scale(this.canvas.height/this.canvas.width,1),L.translateRelative(m.x,m.y),B.multiplyByMatrix(L);const rt=m.z;B.scaleRelative(rt,rt),this.model.getRenderer().setMvpMatrix(B)};y();const x=[0,0,this.canvas.width,this.canvas.height];let V=Date.now();const T=this.model.getModel(),I=de.getIdManager(),z=()=>{const L=Date.now(),$=(L-V)/1e3;T.setParameterValueById(I.getId("ParamAngleX"),this.point.angleX,.5),T.setParameterValueById(I.getId("ParamAngleY"),this.point.angleY,.5),T.setParameterValueById(I.getId("ParamAngleZ"),this.point.angleZ,.5),T.setParameterValueById(I.getId("ParamEyeBallX"),this.point.angleEyeX,.5),T.setParameterValueById(I.getId("ParamEyeBallY"),this.point.angleEyeY,.5),T.setParameterValueById(I.getId("ParamBodyAngleZ"),this.point.angleZ/2,.05),T.saveParameters(),this.model.update($),x[2]=this.canvas.width,x[3]=this.canvas.height,this.model.getRenderer().setRenderState(o,x),this.model.getRenderer().drawModel(),V=L,requestAnimationFrame(z)};window.addEventListener("resize",()=>{y(),z()}),z();const st=["akubi","akubi","swing","AiArt"],k=()=>{setTimeout(()=>{this.model.isMotionFinished&&this.model.startMotionByName(st[Math.floor(Math.random()*st.length)]),k()},1e3*10+Math.random()*1e3*80)};k();const tt=()=>{setTimeout(()=>{this.model.startMotionByName("mimi"),tt()},1e3*10+Math.random()*1e3*30)};tt()}updatePoint(t){Object.assign(this.point,t)}click(t){const i=this.canvas.getBoundingClientRect(),s=i.left+i.width/2,r=i.top+i.height/2,n=(t.clientX-s)/(i.width/2),o=(t.clientY-r)/(i.height/2);this.model.isHit(de.getIdManager().getId("HitArea"),n,o)?this.model.startMotionByName("mimi"):this.model.isHit(de.getIdManager().getId("HitArea2"),n,o)?this.model.startMotionByName("mimi"):this.model.isHit(de.getIdManager().getId("HitArea_Body"),n,o)?this.model.startMotionByName("mimi"):this.model.isHit(de.getIdManager().getId("HitArea_Head"),n,o)}}async function Vg(e,t){return new Promise(i=>{const s=URL.createObjectURL(e),r=new Image;r.onload=()=>{const n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.generateMipmap(t.TEXTURE_2D),URL.revokeObjectURL(s),i(n)},r.addEventListener("error",()=>{console.error("image load error")}),r.src=s})}function wg(e,t,i,s){return Math.sqrt(Math.pow(i-e,2)+Math.pow(s-t,2))}function Tg(e,t,i,s){return Math.atan2(s-t,i-e)}const Ma="https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js",yt="./misskey/live2d/ai/web/",Re={moc3:yt+"ai.moc3",model3:yt+"ai.model3.json",physics3:yt+"ai.physics3.json",textures:[yt+"ai.4096/texture_00.png"],expressions:{smile:yt+"expressions/exp_01.exp3.json",surprise:yt+"expressions/exp_02.exp3.json",happy:yt+"expressions/exp_06.exp3.json",jitome:yt+"expressions/exp_11.exp3.json",gurugurume:yt+"expressions/exp_20.exp3.json"},motions:{swing:yt+"motions/mtn_03.motion3.json",akubi:yt+"motions/mtn_04.motion3.json",mimi:yt+"motions/mtn_05.motion3.json",AiArt:yt+"motions/AiArt.motion3.json"}};let Ia=!1;function Eg(e,t){return new Promise((i,s)=>{const r=document.head.querySelector(`script[src="${Ma}"]`);if(r)Ia?Es(e,t).then(n=>{i(n)}):r.addEventListener("load",()=>{Es(e,t).then(n=>{i(n)})});else{const n=document.createElement("script");n.setAttribute("src",Ma),document.head.appendChild(n),n.addEventListener("load",()=>{Ia=!0,Es(e,t).then(o=>{i(o)})})}})}async function Es(e,t){try{const[i,s,r,n,o,a]=await Promise.all([fetch(Re.model3).then(d=>d.arrayBuffer()),fetch(Re.moc3).then(d=>d.arrayBuffer()),fetch(Re.physics3).then(d=>d.arrayBuffer()),Promise.all(Re.textures.map(d=>fetch(d).then(f=>f.blob()))),Promise.all(Object.entries(Re.expressions).map(([d,f])=>fetch(f).then(_=>_.arrayBuffer()).then(_=>[d,_]))),Promise.all(Object.entries(Re.motions).map(([d,f])=>fetch(f).then(_=>_.arrayBuffer()).then(_=>[d,_])))]),l=new Pg(e);await l.init(i,{moc3:s,physics:r,textures:n,expressions:o,motions:a},{autoBlink:!0,...t});const u=new So,h=d=>{const f=d.x,_=d.y,m=e.getBoundingClientRect(),B=t.eyeX?t.eyeX:m.left+m.width/2,y=t.eyeY?t.eyeY:m.top+m.height/2,x=Tg(f,_,B,y),V=Math.cos(x)*Math.sin(x)*180/Math.PI,T=wg(f,_,B,y),I=B-f,z=y-_;Object.assign(u,{angleX:-I/10,angleY:z/10,angleZ:V*(T/B)/10,angleEyeX:-I/B/10,angleEyeY:z/y/2}),l.updatePoint(u)};return document.body.addEventListener("mousemove",d=>{h({x:d.clientX,y:d.clientY})},!1),window.addEventListener("message",d=>{const{type:f,body:_}=d.data;switch(f){case"setPos":break;case"moveCursor":h(_);break;default:break}},!1),l}catch(i){alert(i.message),console.error(i)}}const Fg=du({setup(e,{expose:t}){let i=null;const s=ql(),r=n=>{i&&i.click(n)};return Er(()=>{const n=new URL(window.location.href);Eg(s.value,{scale:parseFloat(n.searchParams.get("scale")||"1"),x:parseFloat(n.searchParams.get("x")||"0"),y:parseFloat(n.searchParams.get("y")||"1"),eyeX:n.searchParams.has("eyeX")?parseFloat(n.searchParams.get("eyeX")):void 0,eyeY:n.searchParams.has("eyeY")?parseFloat(n.searchParams.get("eyeY")):void 0}).then(o=>{i=Vr(o)})}),t({canvas:s,touched:r}),(n,o)=>(zu(),Yu("canvas",{id:"canvas",ref_key:"canvas",ref:s,onClick:r},null,512))}});Ac(Fg).mount("#app");
